{"ast":null,"code":"import _slicedToArray from\"/root/Spring-Social-Network/src/main/webapp/WEB-INF/jsp/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import Requests from'./Requests';import{FontAwesomeIcon}from\"@fortawesome/react-fontawesome\";import{faSmileBeam,faUserFriends}from\"@fortawesome/free-solid-svg-icons\";import Axios from'axios';import NewCommentNotification from\"./NewCommentNotification\";import{useHistory,Link}from\"react-router-dom\";import DataServices from\"../services/DataServices\";import'../css/notifications.css';import GlobalContext from'../contexts/GlobalContext';var results=[\"Test DATA 001\"];var currentUser={};var userId=0;export var ResultsContext=React.createContext({});export var CurrentUserContext=React.createContext({});export var ResultsProvider=function ResultsProvider(props){return/*#__PURE__*/React.createElement(ResultsContext.Provider,{value:results},props.children);};export var CurrentUserProvider=function CurrentUserProvider(props){return/*#__PURE__*/React.createElement(CurrentUserContext.Provider,{value:currentUser},props.children);};var style={objectFit:'cover',borderRadius:'50%',width:'40px',height:'40px'};var style2={\"float\":\"right\",\"margin-right\":\"12px\"};function Navbar(){var _React$useState=React.useState(\" \"),_React$useState2=_slicedToArray(_React$useState,2),username=_React$useState2[0],setUsername=_React$useState2[1];var _React$useState3=React.useState(0),_React$useState4=_slicedToArray(_React$useState3,2),userId=_React$useState4[0],setUserId=_React$useState4[1];var _React$useState5=React.useState([]),_React$useState6=_slicedToArray(_React$useState5,2),friendReq=_React$useState6[0],setFriendReq=_React$useState6[1];var _React$useState7=React.useState(0),_React$useState8=_slicedToArray(_React$useState7,2),updateValue=_React$useState8[0],setUpdateValue=_React$useState8[1];var _React$useState9=React.useState([]),_React$useState10=_slicedToArray(_React$useState9,2),searchResults=_React$useState10[0],setSearchResults=_React$useState10[1];var _React$useState11=React.useState([]),_React$useState12=_slicedToArray(_React$useState11,2),newComments=_React$useState12[0],setNewComments=_React$useState12[1];var history=useHistory();var _React$useContext=React.useContext(GlobalContext),authenticatedUser=_React$useContext.authenticatedUser,setAuthenticatedUser=_React$useContext.setAuthenticatedUser;function getCurrentUser(){fetch(\"/userDetails\",{method:'GET',credentials:\"include\"}).then(function(response){return response.json();}).then(function(data){setUsername(data.firstName+\" \"+data.lastName);currentUser=data;setAuthenticatedUser(data);setUserId(data.userId);});}function getNewComments(){Axios.get('/post/getNewComments').then(function(response){setNewComments(response.data);}).catch(function(err){console.log(err);});}React.useEffect(function(){getCurrentUser();getAllRequests();getNewComments();// saveCurrentUserId()\n},[userId,updateValue]);// const saveCurrentUserId = () => {\n//     console.log(userId)\n//     history.push({\n//         path: \"/profileAll\",\n//         currentUserId: {id: 3}\n//     });\n// }\nfunction fetchUsers(evt){evt.preventDefault();if(evt.target.search.value)fetch(\"/searchUsers\",{method:'GET',credentials:\"include\",headers:{'input':evt.target.search.value}}).then(function(response){return response.json();}).then(function(data){setSearchResults(data);results=data;console.log(data);console.log(currentUser);});evt.target.search.value=\"\";}function getAllRequests(){if(userId){DataServices.getPendingRequests(userId).then(function(response){setFriendReq(response.data);}).catch(function(error){console.log(\"No friend requests\"+error.response);});}}var isInitialMount=React.useRef(true);React.useEffect(function(){if(isInitialMount.current){isInitialMount.current=false;}else{history.push(\"/results\");}},[searchResults]);var stopDefault=function stopDefault(e){e.preventDefault();e.stopPropagation();};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"nav\",{className:\"navbar navbar-expand-lg navbar-light bg-light fixed-top\"},/*#__PURE__*/React.createElement(\"a\",{className:\"navbar-brand\",href:\"/\"},/*#__PURE__*/React.createElement(\"img\",{src:\"/img/logo.png\",height:\"35\",alt:\"Connector Logo\",className:\"m-0\"})),/*#__PURE__*/React.createElement(\"button\",{className:\"navbar-toggler\",type:\"button\",\"data-toggle\":\"collapse\",\"data-target\":\"#navbarSupportedContent\",\"aria-controls\":\"navbarSupportedContent\",\"aria-expanded\":\"false\",\"aria-label\":\"Toggle navigation\"},/*#__PURE__*/React.createElement(\"span\",{className:\"navbar-toggler-icon\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"collapse navbar-collapse\",id:\"navbarSupportedContent\"},/*#__PURE__*/React.createElement(\"form\",{className:\"form-inline my-2 my-lg-0 mr-auto\",onSubmit:fetchUsers},/*#__PURE__*/React.createElement(\"input\",{id:\"searchBar\",className:\"form-control autocomplete mr-sm-2\",name:\"search\",type:\"search\",placeholder:\"Search\",\"aria-label\":\"Search\"})),/*#__PURE__*/React.createElement(\"ul\",{className:\"navbar-nav\"},/*#__PURE__*/React.createElement(\"li\",{className:\"nav-item active\"},/*#__PURE__*/React.createElement(Link,{to:\"/\",className:\"nav-link\"},\"Feed\")),/*#__PURE__*/React.createElement(\"li\",{className:\"nav-item dropdown\"},(friendReq.length>0||newComments.length>0)&&/*#__PURE__*/React.createElement(\"span\",{className:\"badge badge-pill badge-primary\",style:style2},friendReq.length+newComments.length),/*#__PURE__*/React.createElement(\"a\",{className:\"nav-link dropdown-toggle\",href:\"#\",id:\"navbarDropdown\",role:\"button\",\"data-toggle\":\"dropdown\",\"aria-haspopup\":\"true\",\"aria-expanded\":\"false\"},\"Notifications\"),/*#__PURE__*/React.createElement(\"div\",{className:\"dropdown-menu dropdown-menu-right notificationsDiv\",onClick:stopDefault,\"aria-labelledby\":\"navbarDropdown\"},friendReq.length==0&&newComments.length==0&&/*#__PURE__*/React.createElement(\"small\",{className:\"ml-2\"},\"No New Notifications\"),friendReq.length>0&&/*#__PURE__*/React.createElement(\"small\",{className:\"text-left ml-3\"},\"Connection Requests\"),friendReq.length!==0&&friendReq.map(function(item){return/*#__PURE__*/React.createElement(\"div\",{onClick:stopDefault,className:\"dropdown-item px-1 py-0\"},/*#__PURE__*/React.createElement(Requests,{requesterInfo:{myId:userId,id:item.userId,username:item.firstName+\" \"+item.lastName},handleUpdate:setUpdateValue}));}),newComments.length>0&&/*#__PURE__*/React.createElement(\"small\",{className:\"text-left ml-3\"},\"New Comments on your Posts\"),newComments.length>0&&newComments.map(function(item){return/*#__PURE__*/React.createElement(\"div\",{className:\"dropdown-item px-2 py-0 m-0\"},/*#__PURE__*/React.createElement(NewCommentNotification,{comment:item,updateNotifications:getNewComments}));}))),/*#__PURE__*/React.createElement(\"li\",{className:\"nav-item active\"},/*#__PURE__*/React.createElement(Link,{to:\"/chat\",className:\"nav-link\"},\"Messages\")),/*#__PURE__*/React.createElement(\"li\",{className:\"nav-item active\"},/*#__PURE__*/React.createElement(Link,{to:\"/connections\",className:\"nav-link\"},\"Connections\")),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"img\",{style:style,src:\"/api/profile/image/download\",className:\"avatar rounded-circle ml-3\",alt:\"Cinque Terre\"})),/*#__PURE__*/React.createElement(\"li\",{className:\"nav-item\"},/*#__PURE__*/React.createElement(Link,{to:\"/profile\",className:\"nav-link\"},username)),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"a\",{className:\"nav-link\",href:\"/logout\"},\"Logout\"))))));}export default Navbar;","map":{"version":3,"sources":["/root/Spring-Social-Network/src/main/webapp/WEB-INF/jsp/react/src/components/Navbar.jsx"],"names":["React","Requests","FontAwesomeIcon","faSmileBeam","faUserFriends","Axios","NewCommentNotification","useHistory","Link","DataServices","GlobalContext","results","currentUser","userId","ResultsContext","createContext","CurrentUserContext","ResultsProvider","props","children","CurrentUserProvider","style","objectFit","borderRadius","width","height","style2","Navbar","useState","username","setUsername","setUserId","friendReq","setFriendReq","updateValue","setUpdateValue","searchResults","setSearchResults","newComments","setNewComments","history","useContext","authenticatedUser","setAuthenticatedUser","getCurrentUser","fetch","method","credentials","then","response","json","data","firstName","lastName","getNewComments","get","catch","err","console","log","useEffect","getAllRequests","fetchUsers","evt","preventDefault","target","search","value","headers","getPendingRequests","error","isInitialMount","useRef","current","push","stopDefault","e","stopPropagation","length","map","item","myId","id"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Requests from './Requests'\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\nimport {faSmileBeam, faUserFriends} from \"@fortawesome/free-solid-svg-icons\";\nimport Axios from 'axios';\nimport NewCommentNotification from \"./NewCommentNotification\";\nimport {useHistory, Link} from \"react-router-dom\";\nimport DataServices from \"../services/DataServices\";\nimport '../css/notifications.css';\nimport GlobalContext from '../contexts/GlobalContext';\n\nlet results = [\"Test DATA 001\"];\nlet currentUser = {};\nlet userId = 0;\n\nexport const ResultsContext = React.createContext({});\nexport const CurrentUserContext = React.createContext({});\n\nexport const ResultsProvider = (props) => {\n\n    return (\n        <ResultsContext.Provider value={results}>\n            {props.children}\n            {/* this indicates that the global store is accessible to all the child tags with MyProvider as Parent */}\n        </ResultsContext.Provider>\n    );\n};\n\nexport const CurrentUserProvider = (props) => {\n    return (\n        <CurrentUserContext.Provider value={currentUser}>\n            {props.children}\n        </CurrentUserContext.Provider>\n    );\n};\n\nconst style = {\n    objectFit: 'cover',\n    borderRadius: '50%',\n    width: '40px',\n    height: '40px'\n};\n\nconst style2 = {\n    \"float\": \"right\",\n    \"margin-right\": \"12px\"\n};\n\nfunction Navbar() {\n\n    const [username, setUsername] = React.useState(\" \");\n    const [userId, setUserId] = React.useState(0);\n    const [friendReq, setFriendReq] = React.useState([]);\n    const [updateValue, setUpdateValue] = React.useState(0);\n    const [searchResults, setSearchResults] = React.useState([]);\n    const [newComments, setNewComments] = React.useState([]);\n    const history = useHistory();\n    const {authenticatedUser, setAuthenticatedUser} = React.useContext(GlobalContext);\n\n    function getCurrentUser() {\n\n        fetch(\"/userDetails\", {\n            method: 'GET',\n            credentials: \"include\"\n        })\n            .then(response => response.json())\n            .then(data => {\n                setUsername(data.firstName + \" \" + data.lastName);\n                currentUser = data;\n                setAuthenticatedUser(data);\n                setUserId(data.userId);\n            });\n    }\n\n    function getNewComments() {\n        Axios.get('/post/getNewComments')\n            .then((response) => {\n                setNewComments(response.data);\n            }).catch((err) => {console.log(err)});\n    }\n\n    React.useEffect(() => {\n        getCurrentUser();\n        getAllRequests();\n        getNewComments();\n        // saveCurrentUserId()\n    }, [userId, updateValue]);\n\n\n    // const saveCurrentUserId = () => {\n    //     console.log(userId)\n    //     history.push({\n    //         path: \"/profileAll\",\n    //         currentUserId: {id: 3}\n    //     });\n    // }\n\n    function fetchUsers(evt) {\n        evt.preventDefault();\n\n        if(evt.target.search.value)\n        fetch(\"/searchUsers\",\n            {\n                method: 'GET',\n                credentials: \"include\",\n                headers: {\n                    'input': evt.target.search.value\n                },\n            })\n            .then(response => response.json())\n            .then(data => {\n                setSearchResults(data);\n                results = data;\n                console.log(data);\n                console.log(currentUser);\n            });\n        evt.target.search.value = \"\";\n    }\n\n    function getAllRequests() {\n        if (userId) {\n            DataServices.getPendingRequests(userId).then(\n                response => {\n                    setFriendReq(response.data);\n                }\n            ).catch(error => {\n                console.log(\"No friend requests\" + error.response)\n            });\n        }\n    }\n\n    const isInitialMount = React.useRef(true);\n    React.useEffect(() => {\n        if (isInitialMount.current) {\n            isInitialMount.current = false;\n        } else {\n            history.push(\"/results\");\n        }\n    }, [searchResults]);\n\n    const stopDefault = e => {\n        e.preventDefault();\n        e.stopPropagation();\n    }\n\n    return (\n        <>\n            {/*{saveCurrentUserId()}*/}\n            <nav className=\"navbar navbar-expand-lg navbar-light bg-light fixed-top\">\n                <a className=\"navbar-brand\" href=\"/\">\n                    <img src=\"/img/logo.png\" height=\"35\" alt=\"Connector Logo\" className=\"m-0\"/>\n                    {/*Connector*/}\n                </a>\n                <button className=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\"\n                        data-target=\"#navbarSupportedContent\" aria-controls=\"navbarSupportedContent\"\n                        aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n                    <span className=\"navbar-toggler-icon\"></span>\n                </button>\n\n                <div className=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\n                    <form className=\"form-inline my-2 my-lg-0 mr-auto\" onSubmit={fetchUsers}>\n                        <input id=\"searchBar\" className=\"form-control autocomplete mr-sm-2\" name=\"search\" type=\"search\"\n                               placeholder=\"Search\" aria-label=\"Search\"/>\n                    </form>\n                    {/*<div style={{width: \"400px\"}}></div>*/}\n                    <ul className=\"navbar-nav\">\n                        <li className=\"nav-item active\">\n                            <Link to=\"/\" className=\"nav-link\">Feed</Link>\n                        </li>\n                        <li className=\"nav-item dropdown\">\n                            {((friendReq.length > 0) || (newComments.length > 0)) &&\n                                <span className=\"badge badge-pill badge-primary\"\n                                  style={style2}>{friendReq.length + newComments.length}</span>\n                            }\n                            <a className=\"nav-link dropdown-toggle\" href=\"#\" id=\"navbarDropdown\" role=\"button\"\n                               data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\n                                Notifications\n                            </a>\n                            <div className=\"dropdown-menu dropdown-menu-right notificationsDiv\" onClick={stopDefault} aria-labelledby=\"navbarDropdown\">\n                                { (friendReq.length == 0 && newComments.length == 0) &&\n                                    <small className=\"ml-2\">No New Notifications</small>\n                                }\n                                    {friendReq.length > 0 && <small className=\"text-left ml-3\">Connection Requests</small>}\n                                {friendReq.length !==0 &&\n                                    friendReq.map((item) => (\n                                        <div onClick={stopDefault} className=\"dropdown-item px-1 py-0\">\n                                            <Requests requesterInfo={{\n                                                myId: userId,\n                                                id: item.userId,\n                                                username: item.firstName + \" \" + item.lastName\n                                            }} handleUpdate={setUpdateValue}/>\n                                        </div>\n                                    ))}\n                                {newComments.length > 0 && <small className=\"text-left ml-3\">New Comments on your Posts</small>}\n                                {newComments.length > 0 &&\n                                    newComments.map((item) => (\n                                        <div className=\"dropdown-item px-2 py-0 m-0\">\n                                            <NewCommentNotification comment={item} updateNotifications={getNewComments}/>\n                                        </div>\n                                    ))\n                                }\n                                    {/*<div className=\"card my-2 border-0\">*/}\n                                    {/*    <div className=\"card-body d-flex flex-row pt-2 pb-0 px-1\">*/}\n                                    {/*        <h6 className=\"card-text align-bottom text-center\">*/}\n                                    {/*            Everything's up to date*/}\n                                    {/*            <FontAwesomeIcon className=\"ml-2\" icon={faSmileBeam}/>*/}\n                                    {/*        </h6>*/}\n                                    {/*    </div>*/}\n                                    {/*</div>*/}\n                                {/*}*/}\n                            </div>\n                        </li>\n                        <li className=\"nav-item active\">\n                        <Link to=\"/chat\" className=\"nav-link\">Messages</Link>                           \n                        </li>\n                        <li className=\"nav-item active\">\n                            <Link to=\"/connections\" className=\"nav-link\">Connections</Link>\n                        </li>\n                        <li>\n                            <img style={style} src=\"/api/profile/image/download\"\n                                 className=\"avatar rounded-circle ml-3\"\n                                 alt=\"Cinque Terre\"/>\n                        </li>\n                        <li className=\"nav-item\">\n                            <Link to=\"/profile\" className=\"nav-link\">{username}</Link>\n                        </li>\n                        {/*<li className=\"nav-item\">*/}\n                        {/*    <form action=\"https://www.paypal.com/cgi-bin/webscr\" method=\"post\" target=\"_top\">*/}\n                        {/*        <input type=\"hidden\" name=\"cmd\" value=\"_s-xclick\" />*/}\n                        {/*        <input type=\"hidden\" name=\"hosted_button_id\" value=\"B6MCPHFEUW3FN\" />*/}\n                        {/*        <input id=\"donatePaypal\" type=\"image\" src=\"https://www.paypalobjects.com/en_US/i/btn/btn_donate_LG.gif\" border=\"0\" name=\"submit\" title=\"PayPal - The safer, easier way to pay online!\" alt=\"Donate with PayPal button\" />*/}\n                        {/*        <img alt=\"\" border=\"0\" src=\"https://www.paypal.com/en_GR/i/scr/pixel.gif\" width=\"1\" height=\"1\" />*/}\n                        {/*    </form>*/}\n                        {/*</li>*/}\n                        <li>\n                            <a className=\"nav-link\" href=\"/logout\">Logout</a>\n                        </li>\n                    </ul>\n                </div>\n            </nav>\n        </>\n    );\n}\n\nexport default Navbar;"]},"metadata":{},"sourceType":"module"}