{"version":3,"sources":["services/DataServices.js","components/Requests.jsx","components/NewCommentNotification.jsx","contexts/GlobalContext.js","components/Navbar.jsx","components/Comment.jsx","components/Post.jsx","components/Contact.jsx","components/PostForm.jsx","atom/globalState.js","components/ArticlePrev.jsx","components/NewsFeed.jsx","components/ResultUser.jsx","components/Search.jsx","components/Dropzone.jsx","components/DropzoneBg.jsx","components/ProfileBg.jsx","pages/Profile.jsx","components/ConnectionCard.jsx","components/Connections.jsx","pages/ProfileAll.jsx","pages/FriendsProfilePage.jsx","components/SinglePost.jsx","components/MessengerContact.jsx","components/MessengerMessage.jsx","components/Messenger.jsx","App.jsx","index.js"],"names":["getAllUsers","axios","get","getCurrentUser","getCurrentProfile","userId","URL_CURRENT_USER","getCurrentRelationship","currentUserId","profilePageId","post","deleteRelationship","createRelationship","acceptRelationship","getPendingRequests","imageUpload","userid","console","log","getContacts","findChatMessages","senderId","recipientId","findChatMessage","id","countNewMessages","this","style","objectFit","borderRadius","width","height","Requests","props","url","requesterInfo","useHistory","className","src","alt","username","onClick","DataServices","myId","then","handleUpdate","NewCommentNotification","history","Axios","comment","commentId","response","push","pathname","state","data","updateNotifications","user","firstName","lastName","date","created","createContext","results","currentUser","ResultsContext","React","CurrentUserContext","ResultsProvider","Provider","value","children","CurrentUserProvider","style2","Navbar","useState","setUsername","setUserId","friendReq","setFriendReq","updateValue","setUpdateValue","searchResults","setSearchResults","newComments","setNewComments","useContext","GlobalContext","setAuthenticatedUser","authenticatedUser","getNewComments","catch","err","useEffect","fetch","method","credentials","json","error","isInitialMount","useRef","current","stopDefault","e","preventDefault","stopPropagation","href","type","data-toggle","data-target","aria-controls","aria-expanded","aria-label","onSubmit","evt","target","search","headers","name","placeholder","to","length","role","aria-haspopup","aria-labelledby","map","item","Comment","Date","setDateTime","editable","setEditable","text","setText","a","withCredentials","viewProfile","detail","tempDate","setHours","getHours","getMinutes","getSeconds","getMilliseconds","cursor","rows","minLength","maxLength","onChange","setValue","Post","postImageUrl","setPostImageUrl","cheers","setCheers","postId","filter","cheer","active","imageUrl","document","getElementById","display","icon","faGlassCheers","faComments","comments","input","sort","b","key","Contact","userFriendId","PostForm","imgUrl","setImgUrl","buttonDisplay","setButtonDisplay","regex","RegExp","fileName","setFileName","imageFile","setImageFile","onDrop","useCallback","acceptedFiles","file","formData","FormData","path","append","removeImage","useDropzone","getRootProps","getInputProps","isDragActive","removeButtonStyle","resetForm","click","closeModal","alert","aria-describedby","test","loggedInUser","atom","default","persistence_UNSTABLE","ArticlePrev","window","open","article","category","title","createdAt","_id","postsForContext","PostsContext","PostsProvider","NewsFeed","items","setItems","posts","setPosts","loadingSpinner","setLoadingSpinner","loadingArticleSpinner","setLoadingArticleSpinner","page","setPage","setConnections","connections","trending","setTrending","useRecoilState","setUser","friends","fetchTrendingArticles","useBottomScrollListener","concat","tabindex","aria-hidden","data-dismiss","trend","avatar","Search","Consumer","context","ResultUser","Dropzone","ProfileBg","background","backgroundSize","DropzoneBg","birthday","toLocaleDateString","Profile","ConnectionCard","Connections","ProfileAll","location","useLocation","backgroundUrl","userRel","setUserRel","update","setUpdate","userFirstId","deleteRel","ifStatements","pendingFirstSecond","pendingSecondFirst","faUserPlus","faUserFriends","FriendsProfilePage","SinglePost","cursorStyle","MessengerContact","activeChat","setActiveChat","contact","MessengerMessage","message","timestamp","isToday","someDate","today","getDate","getMonth","getFullYear","isSameYear","authUser","content","format","Messenger","chatMessages","setChatMessages","stompClient","chats","setChats","setMessage","chat","msg","trim","send","JSON","stringify","newMessages","sendMessage","App","SockJSr","SockJS","Stomp","over","onError","onConnected","subscribe","onMessageReceived","notification","parse","body","chatNotificationId","connect","from","exact","component","render","recoilPersist","storage","sessionStorage","RecoilPersist","updateState","ReactDOM","initializeState"],"mappings":"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","file":"static/js/main.9e47f1dc.chunk.js","sourcesContent":["import axios from 'axios';\n\n\nconst URL_ALL_USERS='/api/profile/users';\nconst URL_CURRENT_USER='/api/profile/user';\nconst URL_UPLOAD_IMAGE_PROFILE='/api/profile/';\nconst URL_CHECK_RELATIONSHIP = '/api/relationship'\nconst URL_DELETE_RELATIONSHIP = '/api/deleteRelationship'\nconst URL_CREATE_RELATIONSHIP = '/api/createRelationship'\nconst URL_ACCEPT_RELATIONSHIP = '/api/acceptRelationship'\nconst URL_FRIEND_REQUESTS = '/api/relationshipPending/'\n\nconst URL_GET_CONTACTS='/api/user/';\n\nconst URL_FIND_MESSAGES='/messages/';\n\nfunction TrainerDataService(){\n\n\n    this.getAllUsers = getAllUsers;\n    this.getCurrentUser=getCurrentUser;\n    this.imageUpload=imageUpload;\n    this.getCurrentProfile = getCurrentProfile\n    this.getCurrentRelationship = getCurrentRelationship\n    this.deleteRelationship = deleteRelationship\n    this.createRelationship = createRelationship\n    this.acceptRelationship = acceptRelationship\n    this.getPendingRequests = getPendingRequests\n    this.getContacts=getContacts;\n    this.findChatMessages=findChatMessages;\n    this.findChatMessage=findChatMessage;\n    this.countNewMessages=countNewMessages;\n\n}\n\n\n\nfunction getAllUsers(){\n\n    return axios.get(URL_ALL_USERS);\n\n\n}\n\nfunction getCurrentUser(){\n\n    return axios.get(URL_CURRENT_USER);\n\n}\n\nfunction getCurrentProfile(userId) {\n    return axios.get(URL_CURRENT_USER + \"/\" + userId )\n}\n\n function getCurrentRelationship(currentUserId, profilePageId) {\n    return axios.post(URL_CHECK_RELATIONSHIP, {\n        currentUserId,\n        profilePageId\n    })\n }\n\n function deleteRelationship(currentUserId, profilePageId) {\n    return axios.post(URL_DELETE_RELATIONSHIP, {\n        currentUserId,\n        profilePageId\n    })\n }\n\n function createRelationship(currentUserId, profilePageId) {\n     return axios.post(URL_CREATE_RELATIONSHIP, {\n         currentUserId,\n         profilePageId\n     })\n }\n\n function acceptRelationship(currentUserId, profilePageId) {\n     return axios.post(URL_ACCEPT_RELATIONSHIP, {\n         currentUserId,\n         profilePageId\n     })\n }\n\n function getPendingRequests(currentUserId) {\n    return axios.get(URL_FRIEND_REQUESTS + currentUserId)\n }\n\nfunction imageUpload(userid){\n    console.log(\"userid\",userid);\n    return axios.post(URL_UPLOAD_IMAGE_PROFILE+userid+\"/image/upload\");\n\n}\n\nfunction getContacts(){\n\n    return axios.get(URL_GET_CONTACTS);\n}\n\nfunction findChatMessages(senderId,recipientId){\n    return axios.get(URL_FIND_MESSAGES + senderId + \"/\" + recipientId);\n}\n\nfunction findChatMessage(id){\n    return axios.get(URL_FIND_MESSAGES+id);\n}\n\nfunction countNewMessages(senderId,recipientId){\n    return axios.get(URL_FIND_MESSAGES+senderId+\"/\"+recipientId+\"/count\");\n}\n\nexport default (new TrainerDataService());","import React from 'react';\nimport {useHistory} from \"react-router-dom\";\nimport DataServices from \"../services/DataServices\";\n\nconst style = {\n    objectFit: 'cover',\n    borderRadius: '50%',\n    width: '40px',\n    height: '40px'\n};\n\nfunction Requests(props) {\n\n    let url = \"/api/profile/searchUsers/\" + props.requesterInfo.id;\n    let history = useHistory();\n\n\n    const onClick = e => {\n        e.preventDefault();\n\n\n\n\n        }\n\n    const acceptRel = () => {\n        DataServices.acceptRelationship(props.requesterInfo.myId, props.requesterInfo.id).then (\n            () => {\n                console.log(\"Friend request from User \" + props.requesterInfo.id + \" Accepted\")\n                props.handleUpdate(props.requesterInfo.id);\n            }\n        )\n    }\n\n    const deleteRel = () => {\n        DataServices.deleteRelationship(props.requesterInfo.myId, props.requesterInfo.id).then(\n            () => {\n                console.log(\"Friend request from user \" + props.requesterInfo.id + \" Declined\" )\n                props.handleUpdate(props.requesterInfo.id);\n            }\n        )\n    }\n\n    return (\n        <>\n            <div className=\"card my-2 border-0\">\n                <div className=\"card-body d-flex flex-row justify-content-between m-0 p-0\">\n                    <div className=\"d-flex flex-row\">\n                        <img style={style} src={url}\n                             className=\"avatar rounded-circle mx-2\"\n                             alt=\"Profile Picture\"/>\n                        <h6 className=\"card-text align-bottom mt-2\">{props.requesterInfo.username}</h6>\n                    </div>\n                    <div>\n                        <button className=\"btn btn-success ml-2\" onClick={acceptRel}><i className=\"fas fa-user-check\"></i></button>\n                        <button className=\"btn btn-danger ml-2\" onClick={deleteRel}><i className=\"fas fa-user-times\"></i></button>\n                    </div>\n                </div>\n            </div>\n\n        </>\n    )\n\n\n}\n\n\nexport default Requests;","import React from \"react\";\nimport Axios from \"axios\";\nimport {useHistory} from 'react-router-dom';\nimport TimeAgo from 'react-timeago';\nimport '../css/commentNotification.css';\n\nexport default function NewCommentNotification(props) {\n\n    const history = useHistory();\n\n    function selectNotificationComment() {\n        Axios.get(`/post/getSpecificPost/${props.comment.commentId}`)\n            .then((response) =>{\n                history.push({\n                    pathname: \"/post\",\n                    state: {\n                        post: response.data\n                    }\n                });\n                props.updateNotifications();\n            });\n    }\n\n    return (\n        <>\n            <div className=\"card my-2 border-0\" onClick={selectNotificationComment}>\n                <div className=\"card-body justify-content-start my-0 py-0 px-1\">\n                    <div className=\"commentNotification\">\n                        <p className=\"card-text\"><b className=\"card-title mt-2\">{props.comment.user.firstName + \" \" + props.comment.user.lastName}</b> commented on your post</p>\n                    </div>\n                    <div className=\"text-right\">\n                        <small><TimeAgo date={props.comment.created}/></small>\n                    </div>\n                </div>\n            </div>\n\n        </>\n    );\n}","import { createContext } from 'react';\n\nexport default createContext(null);","import React from 'react';\nimport Requests from './Requests'\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\nimport {faSmileBeam, faUserFriends} from \"@fortawesome/free-solid-svg-icons\";\nimport Axios from 'axios';\nimport NewCommentNotification from \"./NewCommentNotification\";\nimport {useHistory, Link} from \"react-router-dom\";\nimport DataServices from \"../services/DataServices\";\nimport '../css/notifications.css';\nimport GlobalContext from '../contexts/GlobalContext';\n\nlet results = [\"Test DATA 001\"];\nlet currentUser = {};\nlet userId = 0;\n\nexport const ResultsContext = React.createContext({});\nexport const CurrentUserContext = React.createContext({});\n\nexport const ResultsProvider = (props) => {\n\n    return (\n        <ResultsContext.Provider value={results}>\n            {props.children}\n            {/* this indicates that the global store is accessible to all the child tags with MyProvider as Parent */}\n        </ResultsContext.Provider>\n    );\n};\n\nexport const CurrentUserProvider = (props) => {\n    return (\n        <CurrentUserContext.Provider value={currentUser}>\n            {props.children}\n        </CurrentUserContext.Provider>\n    );\n};\n\nconst style = {\n    objectFit: 'cover',\n    borderRadius: '50%',\n    width: '40px',\n    height: '40px'\n};\n\nconst style2 = {\n    \"float\": \"right\",\n    \"margin-right\": \"12px\"\n};\n\nfunction Navbar() {\n\n    const [username, setUsername] = React.useState(\" \");\n    const [userId, setUserId] = React.useState(0);\n    const [friendReq, setFriendReq] = React.useState([]);\n    const [updateValue, setUpdateValue] = React.useState(0);\n    const [searchResults, setSearchResults] = React.useState([]);\n    const [newComments, setNewComments] = React.useState([]);\n    const history = useHistory();\n    const {authenticatedUser, setAuthenticatedUser} = React.useContext(GlobalContext);\n\n    function getCurrentUser() {\n\n        fetch(\"/userDetails\", {\n            method: 'GET',\n            credentials: \"include\"\n        })\n            .then(response => response.json())\n            .then(data => {\n                setUsername(data.firstName + \" \" + data.lastName);\n                currentUser = data;\n                setAuthenticatedUser(data);\n                setUserId(data.userId);\n            });\n    }\n\n    function getNewComments() {\n        Axios.get('/post/getNewComments')\n            .then((response) => {\n                setNewComments(response.data);\n            }).catch((err) => {console.log(err)});\n    }\n\n    React.useEffect(() => {\n        getCurrentUser();\n        getAllRequests();\n        getNewComments();\n        // saveCurrentUserId()\n    }, [userId, updateValue]);\n\n\n    // const saveCurrentUserId = () => {\n    //     console.log(userId)\n    //     history.push({\n    //         path: \"/profileAll\",\n    //         currentUserId: {id: 3}\n    //     });\n    // }\n\n    function fetchUsers(evt) {\n        evt.preventDefault();\n\n        if(evt.target.search.value)\n        fetch(\"/searchUsers\",\n            {\n                method: 'GET',\n                credentials: \"include\",\n                headers: {\n                    'input': evt.target.search.value\n                },\n            })\n            .then(response => response.json())\n            .then(data => {\n                setSearchResults(data);\n                results = data;\n                console.log(data);\n                console.log(currentUser);\n            });\n        evt.target.search.value = \"\";\n    }\n\n    function getAllRequests() {\n        if (userId) {\n            DataServices.getPendingRequests(userId).then(\n                response => {\n                    setFriendReq(response.data);\n                }\n            ).catch(error => {\n                console.log(\"No friend requests\" + error.response)\n            });\n        }\n    }\n\n    const isInitialMount = React.useRef(true);\n    React.useEffect(() => {\n        if (isInitialMount.current) {\n            isInitialMount.current = false;\n        } else {\n            history.push(\"/results\");\n        }\n    }, [searchResults]);\n\n    const stopDefault = e => {\n        e.preventDefault();\n        e.stopPropagation();\n    }\n\n    return (\n        <>\n            {/*{saveCurrentUserId()}*/}\n            <nav className=\"navbar navbar-expand-lg navbar-light bg-light fixed-top\">\n                <a className=\"navbar-brand\" href=\"/\">\n                    <img src=\"/img/logo.png\" height=\"35\" alt=\"Connector Logo\" className=\"m-0\"/>\n                    {/*Connector*/}\n                </a>\n                <button className=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\"\n                        data-target=\"#navbarSupportedContent\" aria-controls=\"navbarSupportedContent\"\n                        aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n                    <span className=\"navbar-toggler-icon\"></span>\n                </button>\n\n                <div className=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\n                    <form className=\"form-inline my-2 my-lg-0 mr-auto\" onSubmit={fetchUsers}>\n                        <input id=\"searchBar\" className=\"form-control autocomplete mr-sm-2\" name=\"search\" type=\"search\"\n                               placeholder=\"Search\" aria-label=\"Search\"/>\n                    </form>\n                    {/*<div style={{width: \"400px\"}}></div>*/}\n                    <ul className=\"navbar-nav\">\n                        <li className=\"nav-item active\">\n                            <Link to=\"/\" className=\"nav-link\">Feed</Link>\n                        </li>\n                        <li className=\"nav-item dropdown\">\n                            {((friendReq.length > 0) || (newComments.length > 0)) &&\n                                <span className=\"badge badge-pill badge-primary\"\n                                  style={style2}>{friendReq.length + newComments.length}</span>\n                            }\n                            <a className=\"nav-link dropdown-toggle\" href=\"#\" id=\"navbarDropdown\" role=\"button\"\n                               data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\n                                Notifications\n                            </a>\n                            <div className=\"dropdown-menu dropdown-menu-right notificationsDiv\" onClick={stopDefault} aria-labelledby=\"navbarDropdown\">\n                                { (friendReq.length == 0 && newComments.length == 0) &&\n                                    <small className=\"ml-2\">No New Notifications</small>\n                                }\n                                    {friendReq.length > 0 && <small className=\"text-left ml-3\">Connection Requests</small>}\n                                {friendReq.length !==0 &&\n                                    friendReq.map((item) => (\n                                        <div onClick={stopDefault} className=\"dropdown-item px-1 py-0\">\n                                            <Requests requesterInfo={{\n                                                myId: userId,\n                                                id: item.userId,\n                                                username: item.firstName + \" \" + item.lastName\n                                            }} handleUpdate={setUpdateValue}/>\n                                        </div>\n                                    ))}\n                                {newComments.length > 0 && <small className=\"text-left ml-3\">New Comments on your Posts</small>}\n                                {newComments.length > 0 &&\n                                    newComments.map((item) => (\n                                        <div className=\"dropdown-item px-2 py-0 m-0\">\n                                            <NewCommentNotification comment={item} updateNotifications={getNewComments}/>\n                                        </div>\n                                    ))\n                                }\n                                    {/*<div className=\"card my-2 border-0\">*/}\n                                    {/*    <div className=\"card-body d-flex flex-row pt-2 pb-0 px-1\">*/}\n                                    {/*        <h6 className=\"card-text align-bottom text-center\">*/}\n                                    {/*            Everything's up to date*/}\n                                    {/*            <FontAwesomeIcon className=\"ml-2\" icon={faSmileBeam}/>*/}\n                                    {/*        </h6>*/}\n                                    {/*    </div>*/}\n                                    {/*</div>*/}\n                                {/*}*/}\n                            </div>\n                        </li>\n                        <li className=\"nav-item active\">\n                        <Link to=\"/chat\" className=\"nav-link\">Messages</Link>                           \n                        </li>\n                        <li className=\"nav-item active\">\n                            <Link to=\"/connections\" className=\"nav-link\">Connections</Link>\n                        </li>\n                        <li>\n                            <img style={style} src=\"/api/profile/image/download\"\n                                 className=\"avatar rounded-circle ml-3\"\n                                 alt=\"Cinque Terre\"/>\n                        </li>\n                        <li className=\"nav-item\">\n                            <Link to=\"/profile\" className=\"nav-link\">{username}</Link>\n                        </li>\n                        {/*<li className=\"nav-item\">*/}\n                        {/*    <form action=\"https://www.paypal.com/cgi-bin/webscr\" method=\"post\" target=\"_top\">*/}\n                        {/*        <input type=\"hidden\" name=\"cmd\" value=\"_s-xclick\" />*/}\n                        {/*        <input type=\"hidden\" name=\"hosted_button_id\" value=\"B6MCPHFEUW3FN\" />*/}\n                        {/*        <input id=\"donatePaypal\" type=\"image\" src=\"https://www.paypalobjects.com/en_US/i/btn/btn_donate_LG.gif\" border=\"0\" name=\"submit\" title=\"PayPal - The safer, easier way to pay online!\" alt=\"Donate with PayPal button\" />*/}\n                        {/*        <img alt=\"\" border=\"0\" src=\"https://www.paypal.com/en_GR/i/scr/pixel.gif\" width=\"1\" height=\"1\" />*/}\n                        {/*    </form>*/}\n                        {/*</li>*/}\n                        <li>\n                            <a className=\"nav-link\" href=\"/logout\">Logout</a>\n                        </li>\n                    </ul>\n                </div>\n            </nav>\n        </>\n    );\n}\n\nexport default Navbar;","import React from 'react';\nimport { CurrentUserContext } from \"./Navbar\";\nimport {useHistory} from \"react-router-dom\";\nimport Axios from \"axios\";\nimport TimeAgo from 'react-timeago';\n\n// function fetchData() {\n//     fetch('/getcityfromcountry/7', {mode: \"cors\"})\n//         .then(response => response.json())\n//         .then(data => console.log(data));\n// }\n\nconst style = {\n    objectFit: 'cover',\n    borderRadius: '50%',\n    width: '40px',\n    height: '40px'\n};\n\nfunction Comment(props){\n\n    const [dateTime, setDateTime] = React.useState(new Date());\n    const [editable, setEditable] = React.useState(false);\n    const [text, setText] = React.useState(props.comment.text);\n    const currentUser = React.useContext(CurrentUserContext);\n    const history = useHistory();\n\n    function deleteComment() {\n        fetch(\"/post/removeComment\",{\n            method: \"POST\",\n            credentials: \"include\",\n            headers: {\n                commentId: props.comment.commentId\n            }\n        })\n            .then((data) => {\n                // history.push(\"/profile\");\n                // history.push(\"/\");\n                props.value.setValue(!props.value.value);\n            });\n    }\n\n    async function updatePost() {\n        if(editable) {\n            try {\n                await Axios.post(\n                    '/post/updateComment',\n                    {\n                        'text': text\n                    },\n                    {\n                        withCredentials: true,\n                        headers: {\n                            'Content-Type': 'application/json',\n                            commentId: props.comment.commentId\n                        }\n                    }\n                );\n            } catch (err) {\n                console.log(err);\n                setText(props.post.text);\n            }\n        }\n        setEditable(!editable);\n    }\n\n    function viewProfile() {\n        if(props.comment.user.userId === currentUser.userId) {\n            history.push(\"/profile\");\n        }\n        else {\n            history.push({\n                pathname: '/ProfileAll',\n                state: {detail: props.comment.user.userId}\n            });\n        }\n    }\n\n    React.useEffect(() => {\n        let tempDate = new Date(props.comment.created);\n        tempDate.setHours(tempDate.getHours()+3,tempDate.getMinutes(),tempDate.getSeconds(),tempDate.getMilliseconds());\n        setDateTime(tempDate);\n\n        // Delete post render\n        // if (props.comment.user.userId === currentUser.userId) {\n        //     document.getElementById(\"deleteButton\" + props.comment.commentId).style.display = \"block\";\n        // }\n    },[]);\n\n    return (\n        <>\n        <div className=\"card p-0 my-1 mx-2\">\n            <div className=\"card-body d-flex flex-row pt-2 pb-0 px-1 mb-0\">\n                {/* \"https://cdn.vox-cdn.com/thumbor/G8A4RF-QWQl7jItQw93r402os_0=/1400x1050/filters:format(jpeg)/cdn.vox-cdn.com/uploads/chorus_asset/file/10816041/rick_and_morty_s02_still.jpg\" */}\n                <img style={style} src={\"/api/profile/searchUsers/\" + props.comment.user.userId}\n                    className=\"avatar rounded-circle mx-2\" \n                    alt=\"Cinque Terre\"\n                    onClick={viewProfile}/>\n                <div className=\"w-100\">\n                    <h6 className=\"card-text mb-0\" onClick={viewProfile} style={{cursor: \"pointer\"}}>{props.comment.user.firstName + \" \" + props.comment.user.lastName}</h6>\n                    <blockquote className=\"card-text p-0 m-0\">\n                        { !editable &&\n                            <p className=\"mb-0\">{text}</p>\n                        }\n                        { editable &&\n                            <textarea value={text} rows=\"3\" minLength=\"1\" maxLength=\"250\" className=\"form-control\" onChange={(evt) => {setText(evt.target.value)}}></textarea>\n                        }\n                    </blockquote>\n\n                </div>\n                {(props.comment.user.userId === currentUser.userId) &&\n                    <>\n                        <div onClick={updatePost} id={\"updateButton\" + props.comment.commentId} style={{cursor: \"pointer\"}}><i className=\"far fa-edit mr-2\"></i></div>\n                        <div onClick={deleteComment} id={\"deleteButton\" + props.comment.commentId} style={{cursor: \"pointer\"}} className=\"pr-2\"><i className=\"far fa-trash-alt\"></i></div>\n                    </>\n                }\n            </div>\n            <div className=\"card-body p-1\">\n                <div className=\"row\">\n                    {/*<div className=\"col-4 m-2\">*/}\n                    {/*    <FontAwesomeIcon className=\"mx-2\" icon={faGlassCheers} />{8}*/}\n                    {/*</div>*/}\n                    <div className=\"col-11 text-right\">\n                        <p className=\"card-text text-secondary\"><small><i className=\"far fa-clock pr-2\"></i><TimeAgo date={props.comment.created}/></small></p>\n                        {/*<p className=\"card-text text-secondary\"><small><i className=\"far fa-clock pr-2\"></i>{dateTime.toLocaleString(\"en-GB\",{timeZone: \"UTC\"})}</small></p>*/}\n                    </div>\n                </div>\n            </div>\n        </div>\n    </>\n    );\n}\n\nexport default Comment;","import React from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faComments } from '@fortawesome/free-solid-svg-icons';\nimport { faGlassCheers } from '@fortawesome/free-solid-svg-icons';\nimport { CurrentUserContext } from \"./Navbar\";\nimport Comment from './Comment';\nimport {useHistory} from \"react-router-dom\";\nimport Axios from 'axios';\nimport TimeAgo from 'react-timeago';\n\nconst style = {\n    objectFit: 'cover',\n    borderRadius: '50%',\n    width: '50px',\n    height: '50px'\n};\n\nfunction Post(props) {\n\n    const [postImageUrl, setPostImageUrl] = React.useState(\"\");\n    const [dateTime, setDateTime] = React.useState(new Date());\n    const [cheers, setCheers] = React.useState(0);\n    const [editable, setEditable] = React.useState(false);\n    const [text, setText] = React.useState(props.post.text);\n    const history = useHistory();\n\n    const currentUser = React.useContext(CurrentUserContext);\n\n    function insertComment(evt) {\n        evt.preventDefault();\n\n        fetch(\"/post/insertComment\",{\n            method: 'POST',\n            credentials: \"include\",\n            headers: {\n                'input': evt.target.input.value,\n                'postId': props.post.postId\n            }\n        })\n            .then(response => response.json())\n            .then(data => props.value.setValue(!props.value.value));\n\n        evt.target.input.value = \"\";\n    }\n\n    async function updatePost(evt) {\n        if(editable) {\n            try {\n                await Axios.post(\n                    '/post/updatePost',\n                    {\n                        'text': text\n                    },\n                    {\n                        withCredentials: true,\n                        headers: {\n                            'Content-Type': 'application/json',\n                            postId: props.post.postId\n                        }\n                    }\n                );\n            } catch (err) {\n                console.log(err);\n                setText(props.post.text);\n            }\n        }\n        setEditable(!editable);\n    }\n\n    function cheer() {\n        fetch(\"/post/cheers\",{\n            method: \"POST\",\n            credentials: \"include\",\n            headers: {\n                postId: props.post.postId\n            }\n        })\n            .then(response => response.json())\n            .then(data => {\n                setCheers(data.filter(cheer => cheer.active === true).length);\n            })\n    }\n\n    function deletePost() {\n        fetch(\"/post/removePost\",{\n            method: \"POST\",\n            credentials: \"include\",\n            headers: {\n                postId: props.post.postId\n            }\n        })\n            .then((data) => {\n                history.push(\"/profile\");\n                history.push(\"/\");\n            });\n    }\n\n    function viewProfile() {\n        if(props.post.user.userId === currentUser.userId) {\n            history.push(\"/profile\");\n        }\n        else {\n            history.push({\n                pathname: '/ProfileAll',\n                state: {detail: props.post.user.userId}\n            });\n        }\n    }\n\n    React.useEffect(() => {\n        // Date render\n        let tempDate = new Date(props.post.created);\n        tempDate.setHours(tempDate.getHours()+3,tempDate.getMinutes(),tempDate.getSeconds(),tempDate.getMilliseconds());\n        setDateTime(tempDate);\n\n        // Cheers render\n        setCheers(props.post.cheers.filter(cheer => cheer.active === true).length);\n\n        // Delete post render\n        // if (props.post.user.userId === currentUser.userId) {\n        //     console.log(props.post);\n        //     document.getElementById(\"deleteButton\" + props.post.postId).style.display = \"block\";\n        // }\n\n        // Image render\n        if (props.post.imageUrl === \"BLOB\") {\n            document.getElementById(\"postImage\"+props.post.postId).style.display = \"block\";\n            setPostImageUrl(\"/post/downloadPostImage/\" + props.post.postId);\n        }\n        else if (props.post.imageUrl !== \"\" && props.post.imageUrl !== null) {\n            document.getElementById(\"postImage\"+props.post.postId).style.display = \"block\";\n            setPostImageUrl(props.post.imageUrl);\n        }\n        // else if (!(props.post.postImage === null || props.post.postImage === undefined)) {\n        //     document.getElementById(\"postImage\"+props.post.postId).style.display = \"block\";\n        //     setPostImageUrl(\"/post/downloadPostImage/\" + props.post.postId);\n        // }\n    },[]);\n\n    return (\n        <>\n            <div className=\"card p-0 my-3\"> {/*col-md-6 col-xs-12 col-sm-8*/}\n                <div className=\"card-body d-flex flex-row p-3\">\n                    <img style={style} src={\"/api/profile/searchUsers/\" + props.post.user.userId}\n                        className=\"avatar rounded-circle mx-3\"\n                        alt=\"Profile picture\"\n                        onClick={viewProfile}/>\n                    <div className=\"w-100\" onClick={viewProfile}>\n                        <h5 className=\"card-title mb-0\" style={{cursor: \"pointer\"}}>{props.post.user.firstName + \" \" + props.post.user.lastName}</h5>\n                        <p className=\"card-text text-secondary\"><small><i className=\"far fa-clock pr-2\"></i><TimeAgo date={props.post.created}/></small></p>\n                        {/*<p className=\"card-text text-secondary\"><small><i className=\"far fa-clock pr-2\"></i>{dateTime.toLocaleString(\"en-GB\",{timeZone: \"UTC\"})}</small></p>*/}\n                    </div>\n                    {(props.post.user.userId === currentUser.userId) &&\n                        <>\n                            <div onClick={updatePost} id={\"updateButton\" + props.post.postId} style={{cursor: \"pointer\"}}><i className=\"far fa-edit mr-2\"></i></div>\n                            <div onClick={deletePost} id={\"deleteButton\" + props.post.postId} style={{cursor: \"pointer\"}}><i className=\"far fa-trash-alt\"></i></div>\n                        </>\n                    }\n                </div>\n                <div className=\"card-body p-1\">\n                    <img src={postImageUrl} alt=\"Couldn't load image from URL\" className=\"img-fluid rounded\" id={\"postImage\" + props.post.postId} style={{display: \"none\", width: \"100%\"}}/>\n                    <blockquote className=\"card-text p-3 m-0\">\n                        { !editable &&\n                            <p className=\"mb-0\">{text}</p>\n                        }\n                        { editable &&\n                            <textarea value={text} rows=\"6\" minLength=\"1\" maxLength=\"250\" className=\"form-control\" onChange={(evt) => {setText(evt.target.value)}}></textarea>\n                        }\n                    </blockquote>\n                    <div className=\"row\">\n                        <div className=\"col-xs-12 col-sm-4 col-md-4 m-2\">\n                            <FontAwesomeIcon className=\"mx-2\" icon={faGlassCheers} onClick={cheer} style={{cursor: \"pointer\"}}/>{cheers}\n                            {/*{props.post.cheers.length}*/}\n                            <FontAwesomeIcon className=\"mx-2\" icon={faComments} data-toggle=\"collapse\" data-target={\"#collapseExample\" + props.post.postId}\n                                             aria-expanded=\"false\" aria-controls=\"collapseExample\" style={{cursor: \"pointer\"}}/>{props.post.comments.length}\n                        </div>\n                    </div>\n                </div>\n                <form className=\"mx-2\" onSubmit={insertComment}>\n                    <div className=\"form-group\">\n                        <input type=\"text\" className=\"form-control\"\n                               placeholder=\"Enter a comment...\" name=\"input\" minLength=\"1\"  maxLength=\"250\"/>\n                    </div>\n                </form>\n                <small className=\"ml-2 mt-0 mb-1\" data-toggle=\"collapse\" data-target={\"#collapseExample\" + props.post.postId}\n                        aria-expanded=\"false\" aria-controls=\"collapseExample\" style={{cursor: \"pointer\"}}>\n                    Show/Hide Comments\n                </small>\n                <div className=\"collapse\" id={\"collapseExample\" + props.post.postId}>\n                    {props.post.comments.sort((a,b)=>{return new Date(a.created) - new Date(b.created)}).map((comment) => (\n                        <Comment comment={comment} value={props.value} key={comment.commentId}/>\n                    ))}\n                </div>\n            </div>\n        </>\n    );\n}\n\nexport default Post;","import React from 'react';\nimport {useHistory} from 'react-router-dom';\n\nconst style = {\n    objectFit: 'cover',\n    borderRadius: '50%',\n    width: '40px',\n    height: '40px'\n};\n\nfunction Contact(props) {\n\n    let url = \"/api/profile/searchUsers/\" + props.userFriendId;\n    let history = useHistory();\n\n    const onClick = e => {\n        e.preventDefault();\n        console.log(props.userFriendId)\n        history.push({\n            pathname: '/ProfileAll',\n            state: {detail: props.userFriendId},\n            // fuckingSendThem: {data: \"data\"}\n        });\n    }\n\n    return (\n        <>\n            <div className=\"card my-2 border-0\">\n                {/*<button onClick={onClick}>Click</button>*/}\n                <div className=\"card-body d-flex flex-row pt-2 pb-0 px-1\">\n                    <img style={style} src={url}\n                         className=\"avatar rounded-circle mx-2\"\n                         alt=\"Profile Picture\"/>\n                    <h6 className=\"card-text align-bottom mt-2\">{props.username}</h6>\n                    <a href=\"/ProfileAll\" className=\"stretched-link\" onClick={onClick}></a>\n                </div>\n            </div>\n\n        </>\n    )\n\n\n}\n\n\nexport default Contact;\n\n","import React, {useCallback} from 'react'\nimport {useDropzone} from 'react-dropzone';\nimport { useHistory } from \"react-router-dom\";\nimport axios from 'axios';\n\nfunction PostForm(props) {\n\n    const [imgUrl, setImgUrl] = React.useState(\"\");\n    const [buttonDisplay, setButtonDisplay] = React.useState(\"none\");\n    const regex = new RegExp(\"(http(s?):)([/|.|\\\\w|\\\\s|-])*\\\\.(?:jpg|gif|png)\");\n    const base64regex = new RegExp(/(data:image\\/[^;]+;base64[^\"]+)/g);\n    const [fileName, setFileName] = React.useState(\"Drag 'n' drop image, or click to browse \");\n    const [imageFile, setImageFile] = React.useState(null);\n    const history = useHistory();\n\n    const onDrop = useCallback(acceptedFiles => {\n        const file = acceptedFiles[0];\n        let formData = new FormData();\n        setFileName(file.path + \" \");\n        formData.append(\"file\",file);\n        setImageFile(formData);\n        removeImage();\n    }, []);\n\n    function onSubmit(evt) {\n        evt.preventDefault();\n\n        if (imageFile === null && (evt.target.text.value !== \"\" || evt.target.url.value !== \"\")) {\n            fetch(\"/post/insertPost\",{\n                method: 'POST',\n                credentials: \"include\",\n                headers: {\n                    'text': evt.target.text.value,\n                    'imageUrl': evt.target.url.value\n                }\n            })\n                .then(response => response.json())\n                .then((data) => {\n                    document.getElementById(\"resetButton\").click();\n                    props.closeModal();\n                    history.push(\"/profile\");\n                })\n                .then(() => {\n                    history.push(\"/\");\n                })\n                .catch((error) => {\n                    console.error('Error:', error);\n            });\n        }\n        else if (imageFile !== null) {\n            axios.post(\n                \"/post/insertPostWithFile\",\n                imageFile,\n                {\n                    headers:{\n                        \"Content-Type\":\"multipart/form-data\",\n                        'text': evt.target.text.value\n                    }\n                }\n            )\n                .then(() => {\n                    document.getElementById(\"resetButton\").click();\n                    props.closeModal();\n                    history.push(\"/profile\");\n                })\n                .then(() => {\n                    history.push(\"/\");\n                })\n                .catch(err=>{\n                console.log(err);\n            });\n        }\n        else {\n            alert(\"Post cannot be empty\");\n        }\n    }\n\n    const {getRootProps, getInputProps, isDragActive} = useDropzone({onDrop});\n\n    let removeButtonStyle = {\n        display: buttonDisplay\n    }\n\n    function checkImage(imageSrc) {\n        let img = new Image();\n        img.onload = function () {\n            console.log(\"Exists\");\n        };\n        img.onerror = function () {\n            console.log(\"Does not Exist\");\n        };\n        img.src = imageSrc;\n    }\n\n    function findUrl(evt) {\n        if (regex.test(evt.target.value)) {\n            setImgUrl(evt.target.value);\n            document.getElementById(\"url\").value = evt.target.value;\n            evt.target.value = \"\";\n            setButtonDisplay(\"inline\");\n            resetForm();\n        }\n    }\n\n    function removeImage() {\n        setImgUrl(\"\");\n        setButtonDisplay(\"none\");\n        document.getElementById(\"url\").value = \"\";\n    }\n\n    function resetForm() {\n        setFileName(\"Drag 'n' drop image, or click to browse \");\n        setImageFile(null);\n    }\n\n    return (\n        <div className=\"my-2\">\n            <img src={imgUrl} alt=\"\" height=\"120px\" className=\"m-1\"/>\n            <button onClick={removeImage} style={removeButtonStyle} className=\"btn btn-white\">x</button>\n            <form onSubmit={onSubmit}>\n                <div className=\"form-group\">\n                    <textarea className=\"form-control\" id=\"exampleInputEmail1\" aria-describedby=\"freeText\"\n                              placeholder=\"What are you thinking?\" onChange={findUrl} name=\"text\" maxLength=\"250\" rows=\"5\"></textarea>\n                        <small id=\"freeText\" className=\"form-text text-muted\">Only visible to your connections.</small>\n                    <input type=\"hidden\" id=\"url\" name=\"url\"/>\n                </div>\n                <div {...getRootProps()}>\n                    <input {...getInputProps()} />\n                    {\n                        isDragActive ?\n                            <p>Drop the image here ...</p> :\n                            <p>{fileName}<i className=\"far fa-file-image\"></i></p>\n                    }\n                </div>\n                <input type=\"reset\" className=\"btn btn-light mr-2\" value=\"Reset Form\" onClick={resetForm} id=\"resetButton\"/>\n                <button type=\"submit\" className=\"btn btn-primary\">Post</button>\n            </form>\n        </div>\n    );\n}\n\nexport default PostForm;","import { atom } from \"recoil\";\n\nexport const loggedInUser = atom({\n  key: \"loggedInUser\",\n  default: {},\n  persistence_UNSTABLE: {\n    type: \"loggedInUser\",\n  },\n});\n\nexport const chatActiveContact = atom({\n  key: \"chatActiveContact\",\n  persistence_UNSTABLE: {\n    type: \"chatActiveContact\",\n  },\n});\n\nexport const chatMessages = atom({\n  key: \"chatMessages\",\n  default: [],\n  persistence_UNSTABLE: {\n    type: \"chatMessages\",\n  },\n});","import React from 'react';\nimport TimeAgo from 'react-timeago';\nimport \"../css/article.css\";\n\nexport default function ArticlePrev(props) {\n\n    return (\n        <div className=\"card border-0 mb-4 prevArticle\" onClick={()=> window.open(\"https://articlomatic.herokuapp.com\", \"_blank\")}>\n            <div className=\"row no-gutters d-flex flex-row justify-content-between\">\n                <div className=\"col-7 mr-2 d-flex flex-column justify-content-between\">\n                    <small className=\"text-muted\">{props.article.category.name}</small>\n                    <h6 className=\"card-title\">{props.article.title}</h6>\n                    <div>\n                        <span className=\"card-text float-left\"><small className=\"text-muted\">{\"@\" + props.article.user.firstName + \" \" + props.article.user.lastName}</small></span>\n                        <span className=\"card-text float-right\"><small className=\"text-muted\"><TimeAgo date={props.article.createdAt}/></small></span>\n                    </div>\n\n                </div>\n                <div className=\"col-4\">\n                    <img src={\"https://mern-articlomaric-app.herokuapp.com/api/articleImage?articleId=\" + props.article._id} className=\"img-fluid imageScalingSmall\" alt=\"Article Image\" />\n                </div>\n            </div>\n\n        </div>\n    );\n}","import React from 'react';\nimport Post from './Post';\nimport Contact from './Contact';\nimport PostForm from './PostForm';\nimport {CurrentUserProvider} from \"./Navbar\";\nimport { loggedInUser } from \"../atom/globalState\";\nimport DataServices from '../services/DataServices';\nimport { useRecoilState } from \"recoil\";\nimport Axios from 'axios';\nimport ArticlePrev from \"./ArticlePrev\";\nimport '../css/fixedNavBar.css';\n\nimport { useBottomScrollListener } from 'react-bottom-scroll-listener';\nimport GlobalContext from \"../contexts/GlobalContext\";\n\nlet postsForContext = [];\nlet connectionsCon = [];\n\nexport const ConnectionsContext = React.createContext([]);\n\nexport const ConnectionsProvider = (props) => {\n    return (\n        <ConnectionsContext.Provider value={connectionsCon}>\n            {props.children}\n        </ConnectionsContext.Provider>\n    );\n};\n\nexport const PostsContext = React.createContext([]);\n\nexport const PostsProvider = (props) => {\n    return (\n        <PostsContext.Provider value={postsForContext}>\n            {props.children}\n        </PostsContext.Provider>\n    );\n};\n\n\nconst style = {\n    height: \"100vh\",\n    position: \"fixed\",\n    overflow: \"scroll\"\n};\n\nconst styleBar = {\n    height: \"100%\",\n    overflowY: \"scroll\"\n};\n\nfunction NewsFeed(props) {\n\n    const [items, setItems] = React.useState([]);\n    const [posts, setPosts] = React.useState([]);\n    const [value, setValue] = React.useState(true);\n    const [loadingSpinner, setLoadingSpinner] = React.useState(true);\n    const [loadingArticleSpinner, setLoadingArticleSpinner] = React.useState(true);\n    const [page, setPage] = React.useState(1);\n    const {connections, setConnections} = React.useContext(GlobalContext);\n\n    const [trending, setTrending] = React.useState([]);\n\n    const [user, setUser] = useRecoilState(loggedInUser);\n\n    React.useEffect(() => {\n        loadCurrentUser();\n      }, []);\n\n      function loadCurrentUser() {\n        DataServices.getCurrentUser().then(\n            response => {\n                setUser(response.data);\n            }\n        ).catch(error => { console.log(error.response) });\n    }\n\n    async function fetchTrendingArticles() {\n        try {\n            await Axios.get('https://mern-articlomaric-app.herokuapp.com/api/getTrendingArticles')\n                .then((response) => {\n                    setTrending(response.data);\n                    setLoadingArticleSpinner(false);\n                });\n\n        } catch(err) {\n            console.log(err);\n        }\n    }\n\n    React.useEffect(() => {\n            fetch('/api/newsFeed')\n                .then(response => response.json())\n                .then(data => {\n                    setItems(data.friends);\n                    setPosts(data.posts);\n                    postsForContext = data.posts;\n                    connectionsCon = data.friends;\n                    setConnections(data.friends);\n                    if(data.posts.length < 5) {\n                        setLoadingSpinner(false);\n                    }\n                });\n        }, [value]\n    );\n\n      React.useEffect(() => {\n        fetchTrendingArticles();\n      },[]);\n\n    function closeModal() {\n        document.getElementById(\"closeButton\").click();\n    }\n\n    useBottomScrollListener(() => {\n        if(loadingSpinner) {\n            Axios.get(`/api/getPostPage/${page}`).then((response) => {\n                setPosts(posts.concat(response.data));\n                if (response.data.length === 0 || response.data.length < 5) {\n                    setLoadingSpinner(false);\n                }\n            });\n            setPage(page + 1);\n        }\n    });\n\n    return (\n        <>\n            <div className=\"col-md-3 col-12 d-none d-md-block\">\n                <div className=\"scrollable\">{items.map((item) => (\n                    <Contact  userFriendId = {item.userId} username={ item.firstName + \" \" + item.lastName}/>\n                ))}\n                </div>\n            </div>\n            <div className=\"col-md-6 col-12 postsList\">\n\n                <button type=\"button\" className=\"btn btn-primary mt-2\" data-toggle=\"modal\" data-target=\"#exampleModal\">\n                    New Post\n                </button>\n                <div className=\"modal fade\" id=\"exampleModal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\n                    <div className=\"modal-dialog\" role=\"document\">\n                        <div className=\"modal-content\">\n                            <div className=\"modal-header\">\n                                <h5 className=\"modal-title\" id=\"exampleModalLabel\">New Post</h5>\n                                <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" id=\"closeButton\">\n                                    <span aria-hidden=\"true\">&times;</span>\n                                </button>\n                            </div>\n                            <div className=\"modal-body\">\n                                <PostForm closeModal={closeModal} value={value} setValue={setValue}/>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <CurrentUserProvider>\n                {posts.map((post) => (\n                    <Post post={post} value={{value:value,setValue:setValue}}/>\n                ))}\n                </CurrentUserProvider>\n                { loadingSpinner &&\n                <div className=\"text-center mt-5 mb-5\">\n                    <div className=\"spinner-border\" role=\"status\">\n                        <span className=\"sr-only\">Loading...</span>\n                    </div>\n                </div>\n                }\n            </div>\n            <div className=\"col-md-3 d-lg-block d-none\">\n                {/*<div className=\"sticky-top\">*/}\n                    <div className=\"mr-2 scrollable\">\n                        <h5 className=\"text-right mt-5\">Trending on Atricl-O-matic</h5>\n                        { loadingArticleSpinner &&\n                        <div className=\"text-center mt-5\">\n                            <div className=\"spinner-border\" role=\"status\">\n                                <span className=\"sr-only\">Loading...</span>\n                            </div>\n                        </div>\n                        }\n                        {trending.map((trend) => {\n                            return <><hr/><ArticlePrev key={trend._id} article={trend}/></>\n                        })}\n                    </div>\n                {/*</div>*/}\n            </div>\n        </>\n    );\n}\n\nexport default NewsFeed;","import React from 'react';\nimport {useHistory} from 'react-router-dom'\n\nconst style = {\n    objectFit: 'cover',\n    borderRadius: '50%',\n    width: '70px',\n    height: '70px'\n};\n\nfunction Contact(props) {\n\n    //TODO add a callback function to send the request to retrieve the contact profile\n\n    let history = useHistory();\n\n\n\n    const getUserId = (props) => {\n        const initialString = props.avatar;\n        if (initialString.length === 47) {\n            return initialString.substr(initialString.length -1)\n        }\n        else if (initialString.length === 48) {\n            // console.log(\"for double digit id: \" + initialString.substr(initialString.length -2) )\n            return initialString.substr(initialString.length -2)\n        }\n        // Triple digit user Id\n        else if ( initialString.length ===49) {\n            return initialString.substr(initialString.length -3)\n        }\n    }\n\n    const onClick = e => {\n        e.preventDefault();\n        console.log(props.avatar)\n        history.push( {\n            pathname: '/ProfileAll',\n            state: {detail: props.avatar}\n        })\n\n    }\n\n\n    return (\n        <>\n            <div className=\"card my-2 border-0\">\n                <div className=\"card-body d-flex flex-row pt-2 pb-0 px-1\">\n                    <img style={style} src={\"/api/profile/searchUsers/\" + props.avatar}\n                         className=\"avatar rounded-circle mx-2\"\n                         alt=\"Profile Picture\"/>\n                    {/*{console.log(getUserId(props))}*/}\n                    <h5 className=\"card-text align-bottom mt-4 ml-3\">{props.username}</h5>\n                    <a href=\"/ProfileAll\" className=\"stretched-link\" onClick={onClick}></a>\n                </div>\n                <hr/>\n            </div>\n        </>\n    );\n}\n\nexport default Contact;","import React from 'react';\nimport { ResultsContext } from './Navbar';\nimport ResultUser from './ResultUser';\nimport context from 'react-bootstrap/esm/AccordionContext';\nimport Contact from \"./Contact\";\nimport '../css/fixedNavBar.css';\n\nfunction Search(props) {\n\n    return (\n        <>\n            <div className=\"col-sm-6 offset-sm-3 col-xs-12 marginFromTopForFixedNavbar\">\n                <h4 className=\"my-4\">\n                    Search results\n                </h4>\n                <ResultsContext.Consumer>\n                    {(context) => (\n                        context.map((item) => (\n                            <ResultUser username={item.firstName + \" \" + item.lastName} avatar={item.userId} onClick={() => {console.log(item)}}/>\n                        ))\n                    )}\n                </ResultsContext.Consumer>\n            </div>\n        </>\n    );\n}\n\nexport default Search;","import React, {useCallback} from 'react'\nimport {useDropzone} from 'react-dropzone';\nimport { useHistory, Link } from \"react-router-dom\";\n\nimport axios from 'axios';\n\nfunction Dropzone() {\n\n    const history = useHistory();\n\n    const style = {\n        objectFit: 'cover',\n        borderRadius: '50%',\n        width: '140px',\n        height: '140px'\n    };\n\n    const onDrop = useCallback(acceptedFiles => {\n      const file = acceptedFiles[0];\n      console.log(file);\n\n\n      const formData= new FormData();\n      formData.append(\"file\",file);\n\n      axios.post(\n        `/api/profile/image/upload`,\n        formData,\n        {\n            headers:{\n                \"Content-Type\":\"multipart/form-data\"\n            }\n        }\n      ).then(()=>{\n          console.log(\"file upload success\");\n          history.push('/');\n          history.push('/profile');\n      }).catch(err=>{\n          console.log(err);\n      });\n        \n\n    }, [])\n    const {getRootProps, getInputProps, isDragActive} = useDropzone({onDrop});\n\n    return (\n        <>\n                <div {...getRootProps()}>\n            <input {...getInputProps()} />\n            {\n              isDragActive ?\n                <p>Drop the image here ...</p> :\n                <p>Drag 'n' drop profile image, or click to select profile image</p>\n            }\n          </div>\n        </>\n    )\n  }\n\nexport default Dropzone;\n","import React, {useCallback} from 'react'\nimport {useDropzone} from 'react-dropzone';\nimport { useHistory, Link } from \"react-router-dom\";\n\nimport axios from 'axios';\n\nfunction Dropzone() {\n\n    const history = useHistory();\n\n    const style = {\n        objectFit: 'cover',\n        borderRadius: '50%',\n        width: '140px',\n        height: '140px'\n    };\n\n    const onDrop = useCallback(acceptedFiles => {\n      const file = acceptedFiles[0];\n      console.log(file);\n\n\n      const formData= new FormData();\n      formData.append(\"file\",file);\n\n      axios.post(\n        `/api/profile/image-background/upload`,\n        formData,\n        {\n            headers:{\n                \"Content-Type\":\"multipart/form-data\"\n            }\n        }\n      ).then(()=>{\n          console.log(\"file upload success\");\n          history.push('/');\n          history.push('/profile');\n      }).catch(err=>{\n          console.log(err);\n      });\n        \n\n    }, [])\n    const {getRootProps, getInputProps, isDragActive} = useDropzone({onDrop});\n\n    return (\n        <>\n                <div {...getRootProps()}>\n            <input {...getInputProps()} />\n            {\n              isDragActive ?\n                <p>Drop the image here ...</p> :\n                <p>Drag 'n' drop background image, or click to select background image</p>\n            }\n          </div>\n        </>\n    )\n  }\n\nexport default Dropzone;\n","import React from 'react'\nimport Axios from 'axios';\nimport './profileBg.css';\nimport '../css/fixedNavBar.css';\n\nimport DataServices from '../services/DataServices';\nimport Dropzone from \"./Dropzone\";\nimport DropzoneBg from './DropzoneBg';\nimport Post from \"./Post\";\nimport {CurrentUserContext} from \"./Navbar\";\n\n\nexport default function ProfileBg(props) {\n\n    const style = {\n        objectFit: 'cover',\n        borderRadius: '50%',\n        width: '250px',\n        height: '250px'\n    };\n\n\n    const background = {\n        background: `url(\"/api/profile/image-background/download\")`,\n        backgroundSize: \"cover\",\n        height: \"300px\"\n    };\n\n    const bgImageStyle = {\n        height: '340px'\n    };\n\n    const [user, setUser] = React.useState({});\n    const [posts, setPosts] = React.useState([]);\n\n    function getCurrentUser() {\n        DataServices.getCurrentUser().then(\n            response => {\n                console.log(\"user in profile : \", response.data);\n                setUser(response.data);\n                getProfilePosts(response.data.userId);\n            }\n        ).catch(error => {\n            console.log(error.response)\n        });\n    }\n\n    function getProfilePosts(userId) {\n        Axios.get(`/post/getUsersPosts/${userId}`)\n            .then(response => {\n                setPosts(response.data);\n            }).catch(err => {\n                console.log(err);\n        });\n    }\n\n    React.useEffect(() => {\n        getCurrentUser();\n    }, []);\n\n    return (\n        <>\n            <div className=\"col-md-6 col-12 offset-md-3 offset-0 marginFromTopForFixedNavbar\">\n                <div id=\"cssSelector\">\n                    <div className=\"card hovercard\">\n                        <div style={background}>\n                            <DropzoneBg/>\n                        </div>\n                        <div className=\"avatar\">\n                            <img style={style} alt=\"image-profile\" src=\"/api/profile/image/download\"/>\n                            <Dropzone/>\n                        </div>\n                        <div className=\"info\">\n                            <div className=\"title\">\n                                <h3>{user.firstName} {user.lastName}</h3>\n                            </div>\n                            <div className=\"desc\">Birthday {new Date(user.birthday).toLocaleDateString(\"en-GB\")}</div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div className=\"col-md-6 col-12 offset-md-3\">\n                {posts.map((post) => (\n                    <Post post={post}/>\n                ))}\n            </div>\n        </>\n    )\n}\n","import React from 'react'\nimport {CurrentUserProvider} from \"../components/Navbar\";\nimport {PostsProvider} from \"../components/NewsFeed\";\n\nimport ProfileBg from '../components/ProfileBg';\n\nimport '../components/profile.css';\n\n\nexport default function Profile() {\n    return (\n        <>\n            <CurrentUserProvider>\n                <PostsProvider>\n                    <ProfileBg/>\n                </PostsProvider>\n            </CurrentUserProvider>\n        </>\n    )\n}\n","import React from 'react';\nimport {useHistory} from 'react-router-dom'\n\nconst style = {\n    objectFit: 'cover',\n    borderRadius: '50%',\n    width: '70px',\n    height: '70px'\n};\n\nfunction ConnectionCard(props) {\n\n    let history = useHistory();\n\n    const onClick = e => {\n        e.preventDefault();\n        console.log(props.avatar)\n        history.push( {\n            pathname: '/ProfileAll',\n            state: {detail: props.userId}\n        })\n\n    }\n\n    return (\n        <>\n            {console.log(props)}\n            <div className=\"card my-2 border-0\">\n                <div className=\"card-body d-flex flex-row pt-2 pb-0 px-1\">\n                    <img style={style} src={\"/api/profile/searchUsers/\" + props.userId}\n                         className=\"avatar rounded-circle mx-2\"\n                         alt=\"Profile Picture\"/>\n                    <h5 className=\"card-text align-bottom mt-4 ml-3\">{props.username}</h5>\n                    <a href=\"/ProfileAll\" className=\"stretched-link\" onClick={onClick}></a>\n                </div>\n                <hr/>\n            </div>\n        </>\n    );\n}\n\nexport default ConnectionCard;","import React from 'react';\n// import { ConnectionsContext } from './NewsFeed';\nimport ConnectionCard from './ConnectionCard';\nimport '../css/fixedNavBar.css';\nimport GlobalContext from \"../contexts/GlobalContext\";\n\nfunction Connections() {\n\n    // const friends = React.useContext(ConnectionsContext);\n    const {connections} = React.useContext(GlobalContext);\n\n    return (\n        <>\n            <div className=\"col-sm-6 offset-sm-3 col-xs-12 marginFromTopForFixedNavbar\">\n                <h4 className=\"my-4\">\n                    Connections\n                </h4>\n                {/*<ConnectionsContext.Consumer>*/}\n                {/*    {(context) => (*/}\n                {/*        context.map((item) => (*/}\n                {/*            <ConnectionCard username={item.firstName + \" \" + item.lastName} userId={item.userId} />*/}\n                {/*        ))*/}\n                {/*    )}*/}\n                {/*</ConnectionsContext.Consumer>*/}\n                {connections.map((item) => (\n                    <ConnectionCard username={item.firstName + \" \" + item.lastName} userId={item.userId}/>\n                ))}\n            </div>\n        </>\n    );\n}\n\nexport default Connections;","import React, {useEffect} from 'react'\nimport {useLocation} from 'react-router-dom'\nimport DataServices from \"../services/DataServices\";\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\nimport {faUserPlus} from \"@fortawesome/free-solid-svg-icons\";\nimport {faUserFriends} from \"@fortawesome/free-solid-svg-icons\";\nimport { CurrentUserContext } from \"../components/Navbar\";\nimport Post from '../components/Post';\nimport '../css/fixedNavBar.css';\nimport Axios from \"axios\";\n\nfunction ProfileAll(props) {\n\n\n    const style = {\n        objectFit: 'cover',\n        borderRadius: '50%',\n        width: '250px',\n        height: '250px'\n    };\n\n    const location = useLocation();\n    const url = \"/api/profile/searchUsers/\" + location.state.detail\n    const backgroundUrl = '/api/profile/image-background/download/' + location.state.detail\n\n    const background = {\n        background: `url(${backgroundUrl})`,\n        backgroundSize: \"cover\",\n        height: \"300px\"\n    };\n\n    const bgImageStyle = {\n        height: '340px'\n    };\n\n\n    const [user, setUser] = React.useState({});\n    const [userRel, setUserRel] = React.useState(null);\n    const [update, setUpdate] = React.useState(0);\n    const currentUser = React.useContext(CurrentUserContext);\n    const [posts, setPosts] = React.useState([]);\n\n    useEffect(() => {\n        getCurrentRelationship();\n        getCurrentUser();\n        getProfilePosts();\n    }, [update]);\n\n    function getProfilePosts() {\n        Axios.get(`/post/getUsersPosts/${location.state.detail}`)\n            .then(response => {\n                setPosts(response.data);\n            }).catch(err => {\n            console.log(err);\n        });\n    }\n\n    function getCurrentUser() {\n        DataServices.getCurrentProfile(location.state.detail).then(\n            response => {\n                console.log(\"user in profile : \", response.data);\n                setUser(response.data);\n            }\n        ).catch(error => {\n            console.log(error.response)\n        });\n    }\n\n    function getCurrentRelationship() {\n        DataServices.getCurrentRelationship(currentUser.userId, location.state.detail).then(\n            response => {\n                console.log(\"friendship status : \", response.data)\n                console.log(response.data.id.userFirstId)\n                setUserRel(response.data)\n                // setUserIds(response.data.id)\n            }\n        ).catch(error => {\n            console.log(error.response)\n        });\n    }\n\n    const deleteRel = () => {\n        DataServices.deleteRelationship(currentUser.userId, location.state.detail).then(\n            () => {\n                console.log(\"Relationship deleted\")\n                setUpdate(1);\n            }\n        )\n    }\n\n    const acceptRel = () => {\n        DataServices.acceptRelationship(currentUser.userId, location.state.detail).then (\n            () => {\n                console.log(\"Friend request Accepted\")\n                setUpdate(3);\n            }\n        )\n    }\n\n    const createRel = () => {\n        DataServices.createRelationship(currentUser.userId, location.state.detail).then(\n            () => {\n                console.log(\"Friend request sent\")\n                setUpdate(2);\n            }\n        )\n    }\n\n    function ifStatements() {\n\n        if (userRel) {\n            if (userRel.id.userFirstId === -1) {\n                return \"noRelationship\"\n            } else if (userRel.friends === true) {\n                return \"friends\";\n            } else if (currentUser.userId < location.state.detail) {\n                if (userRel.pendingFirstSecond) {\n                    return \"pendingFriendRequest\";\n                } else {\n                    return \"respondFriendRequest\"\n                }\n            } else if (userRel.pendingSecondFirst) {\n                return \"pendingFriendRequest\"\n            } else {\n                return \"respondFriendRequest\"\n            }\n        }\n        return false;\n    }\n\n\n    return (\n        <>\n            {console.log(ifStatements())}\n            <div className=\"col-md-6 col-12 offset-md-3 offset-0 marginFromTopForFixedNavbar\">\n                <div id=\"cssSelector\">\n                    <div className=\"card hovercard\">\n                        <div style={background}>\n                        </div>\n                        <div className=\"avatar\">\n                            <img style={style} alt=\"image-profile\" src={url}/>\n                        </div>\n                        <div className=\"info\">\n                            <div className=\"title\">\n                                {ifStatements() === \"noRelationship\" &&\n                                <div className=\"StartingDiv\">\n                                    <button onClick={createRel}>\n                                        <FontAwesomeIcon id=\"AddFriendIcon\" icon={faUserPlus}/>\n                                        <span className=\"InnerSpan\">Add Friend</span>\n                                    </button>\n                                </div>}\n                                {ifStatements() === \"friends\" &&\n                                <div className=\"StartingDiv\">\n                                    <button>\n                                        <FontAwesomeIcon id=\"AddFriendIcon\" icon={faUserFriends}/>\n                                        <span className=\"InnerSpan\">&#10004; Friends</span>\n                                    </button>\n                                    <button id=\"removeB\" onClick={deleteRel}>&#x2717; Remove Friend</button>\n                                </div>}\n                                {ifStatements() === \"pendingFriendRequest\" &&\n                                <div className=\"StartingDiv\">\n                                    <button title=\"Click to cancel Friend Request\">\n                                        <FontAwesomeIcon id=\"AddFriendIcon\" icon={faUserFriends}/>\n                                        <span className=\"InnerSpan\" onClick={deleteRel}>Request Pending</span>\n                                    </button>\n                                </div>}\n                                {ifStatements() === \"respondFriendRequest\" &&\n                                <div className=\"StartingDiv\">\n                                    <button>\n                                        <FontAwesomeIcon id=\"AddFriendIcon\" icon={faUserFriends}/>\n                                        <span className=\"InnerSpan\">Respond to Request</span>\n                                    </button>\n                                    <div>\n                                        <button id=\"acceptB\" onClick={acceptRel}>Accept</button>\n                                        <button id=\"declineB\" onClick={deleteRel}>Decline</button>\n                                    </div>\n                                </div>}\n                                <h3>{user.firstName} {user.lastName}</h3>\n                            </div>\n                            <div className=\"desc\">Birthday {new Date(user.birthday).toLocaleDateString(\"en-GB\")}</div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n                <div className=\"col-md-6 col-12 offset-md-3\">\n                    {posts.map((post) => (\n                        <Post post={post}/>\n                    ))}\n                </div>\n        </>\n    )\n\n}\n\n\nexport default ProfileAll;\n\n","import React from 'react';\nimport ProfileAll from \"./ProfileAll\";\nimport {CurrentUserProvider} from \"../components/Navbar\";\nimport {PostsProvider} from \"../components/NewsFeed\";\n\nfunction FriendsProfilePage() {\n    return (\n        <>\n            <CurrentUserProvider>\n                <PostsProvider>\n                    <ProfileAll/>\n                </PostsProvider>\n            </CurrentUserProvider>\n        </>\n    );\n}\nexport default FriendsProfilePage;","import React from \"react\";\nimport Post from \"./Post\";\nimport {CurrentUserProvider} from \"./Navbar\";\nimport '../css/fixedNavBar.css';\n\nexport default function SinglePost(props) {\n\n    return (\n        <>\n            <div className=\"col-md-6 offset-md-3 col-12 marginFromTopForFixedNavbar\">\n                <CurrentUserProvider>\n                    <Post post={props.location.state.post}/>\n                </CurrentUserProvider>\n            </div>\n        </>\n    );\n}","import React from 'react';\nimport GlobalContext from \"../contexts/GlobalContext\";\n\nconst style = {\n    objectFit: 'cover',\n    borderRadius: '50%',\n    width: '40px',\n    height: '40px'\n};\n\nconst cursorStyle = {\n    cursor: 'pointer'\n};\n\nfunction MessengerContact(props) {\n\n    const {activeChat, setActiveChat} = React.useContext(GlobalContext);\n    let url = \"/api/profile/searchUsers/\" + props.contact.userId;\n\n    function selectChat() {\n        setActiveChat(props.contact);\n    }\n\n    return (\n        <>\n            <div className=\"card my-2 border-0\" onClick={selectChat} style={cursorStyle}>\n                <div className={`card-body d-flex flex-row py-2 pb-0 px-1 ${(activeChat.userId === props.contact.userId) ? \"bg-light\" : \"\"}`}>\n                    <img style={style} src={url}\n                         className=\"avatar rounded-circle mx-2\"\n                         alt=\"Profile Picture\"/>\n                    <h6 className=\"card-text align-bottom mt-2 d-sm-block d-none\">{props.contact.firstName + \" \" + props.contact.lastName}</h6>\n                </div>\n            </div>\n        </>\n    )\n\n\n}\n\n\nexport default MessengerContact;","import React from 'react';\nimport Moment from 'react-moment';\n\nconst style = {\n    borderRadius: '10px'\n};\n\nexport default function MessengerMessage(props) {\n\n    let createdProp = new Date(props.message.timestamp);\n\n    const [created, setCreated] = React.useState(props.message.timestamp);\n\n    function isToday(someDate) {\n        const today = new Date();\n        return someDate.getDate() == today.getDate() &&\n            someDate.getMonth() == today.getMonth() &&\n            someDate.getFullYear() == today.getFullYear();\n    }\n\n    function isSameYear(someDate) {\n        const today = new Date();\n        return someDate.getFullYear() == today.getFullYear();\n    }\n\n    function formatCreated() {\n        if(isToday(createdProp)) {\n            setCreated(createdProp.getHours() + \":\" + createdProp.getMinutes());\n        }\n        else if(isSameYear(createdProp)) {\n            setCreated(createdProp.toDateString().slice(0,-5));\n        }\n        else {\n            setCreated(createdProp.toDateString());\n        }\n    }\n\n    return (\n            <>\n                <div className={props.message.senderId == props.authUser.userId ? \"bg-light float-right\" : \"bg-secondary float-left text-light\"} style={style}>\n                    <p className=\"m-1\">{props.message.content}</p>\n                </div>\n                <br/>\n                <div className={props.message.senderId == props.authUser.userId ? \"text-right\" : \"text-left\"}>\n                    <small className=\"text-secondary\">\n                        {\n                            isToday(new Date(created)) ?\n                                <Moment date={created} format=\"HH:mm\"/> :\n                                (\n                                    isSameYear(new Date(created)) ?\n                                        <Moment date={created} format=\"ddd DD MMM, HH:mm\"/> :\n                                        <Moment date={created} format=\"ddd DD MMM YYYY, HH:mm\"/>\n\n                                )\n                        }\n                    </small>\n                </div>\n            </>\n    );\n}","import React from 'react';\nimport GlobalContext from \"../contexts/GlobalContext\";\nimport Contact from \"./Contact\";\nimport Axios from 'axios';\nimport '../css/messenger.css';\nimport MessengerContact from \"./MessengerContact\";\nimport MessengerMessage from \"./MessengerMessage\";\nimport DataServices from \"../services/DataServices\";\nimport {message} from \"antd\";\n\nexport default function Messenger(props) {\n\n    const {authenticatedUser} = React.useContext(GlobalContext);\n    const {activeChat, setActiveChat} = React.useContext(GlobalContext);\n    const {chatMessages, setChatMessages} = React.useContext(GlobalContext);\n    const {connections} = React.useContext(GlobalContext);\n    const {stompClient} = React.useContext(GlobalContext);\n    const [chats, setChats] = React.useState([]);\n    const [message, setMessage] = React.useState(\"\");\n\n    function getChatMessages(userId) {\n        if (userId) {\n            Axios.get(`/messages/${userId}/${authenticatedUser.userId}`).then((response) => {\n                setChatMessages(response.data);\n            });\n        }\n    }\n\n    function getChats() {\n        Axios.get('/messages/getChats').then((response) => {\n            setChats(response.data);\n            setActiveChat(response.data[0]);\n            //getChatMessages(response.data[0].userId);\n        });\n    }\n\n    const sendMessage = (msg) => {\n        if (msg.trim() !== \"\") {\n            const message = {\n                senderId: authenticatedUser.userId,\n                recipientId: activeChat.userId,\n                content: msg,\n                timestamp: new Date(),\n            };\n            stompClient.send(\"/app/chat\", {}, JSON.stringify(message));\n            const newMessages = [...chatMessages];\n            newMessages.push(message);\n            setChatMessages(newMessages);\n        }\n    };\n\n    function submitForm(evt) {\n        evt.preventDefault();\n        sendMessage(message);\n    }\n\n    React.useEffect(() => {\n        getChats();\n    },[]);\n\n    React.useEffect(() => {\n        getChatMessages(activeChat.userId);\n    },[activeChat]);\n\n    return (\n        <div className=\"col-lg-8 col-12 offset-lg-2 mt-5 pt-3\">\n            {/*Button trigger modal*/}\n            <button type=\"button\" className=\"btn btn-primary my-3\" data-toggle=\"modal\" data-target=\"#exampleModal\">\n                New Chat\n            </button>\n\n            {/*Modal*/}\n            <div className=\"modal fade\" id=\"exampleModal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\n                <div className=\"modal-dialog\" role=\"document\">\n                    <div className=\"modal-content\">\n                        <div className=\"modal-header\">\n                            <h5 className=\"modal-title\" id=\"exampleModalLabel\">Modal title</h5>\n                            <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                                <span aria-hidden=\"true\">&times;</span>\n                            </button>\n                        </div>\n                        <div className=\"modal-body\">\n                            ...\n                        </div>\n                        <div className=\"modal-footer\">\n                            <button type=\"button\" className=\"btn btn-secondary\" data-dismiss=\"modal\">Close</button>\n                            <button type=\"button\" className=\"btn btn-primary\">Save changes</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div className=\"row\">\n                <div className=\"col-4 pr-0 tallDiv\">\n                    <div className=\"tallDivOfChats hideScrollBar\">\n                        {\n                            chats.map((chat) => (\n                                <div>\n                                    <MessengerContact  contact={chat}/>\n                                </div>\n                            ))\n                        }\n                    </div>\n                </div>\n                <div className=\"col-8 border border-light px-0 tallDiv pb-2\">\n                    { activeChat.userId &&\n                        <Contact  userFriendId = {activeChat.userId} username={ activeChat.firstName + \" \" + activeChat.lastName}/>\n                    }\n                    <div className=\"tallOverFlow\">\n                        <ul className=\"px-3\" style={{'listStyle': 'none'}}>\n                            { chatMessages.map((msg) => (\n                                <li>\n                                    <MessengerMessage message={msg} authUser={authenticatedUser}/>\n                                    <br/>\n                                </li>\n                            ))}\n                        </ul>\n                    </div>\n                    <div className=\"m-3\">\n                        <form onSubmit={submitForm}>\n                            <div className=\"form-row\">\n                                <div className=\"col-11\">\n                                    <input\n                                        className=\"form-control w-80\"\n                                        type=\"text\" value={message}\n                                        onChange={(evt) => {setMessage(evt.target.value);}}\n                                    />\n                                </div>\n                                <div className=\"col-1\">\n                                    <button type=\"submit\" className=\"btn\"><i className=\"far fa-paper-plane fa-2x\"></i></button>\n                                </div>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n}","import React from 'react';\nimport {Route, Switch, BrowserRouter, Redirect} from 'react-router-dom';\nimport Navbar, {ResultsProvider, UserIdProvider} from './components/Navbar';\nimport NewsFeed from './components/NewsFeed';\nimport Search from './components/Search';\nimport Profile from \"./pages/Profile\";\nimport Connections from \"./components/Connections\";\nimport FriendsProfilePage from \"./pages/FriendsProfilePage\";\nimport Chat from \"./pages/Chat\";\n//import ConnectionsPage from './pages/ConnectionsPage';\nimport SinglePost from \"./components/SinglePost\";\nimport GlobalContext from \"./contexts/GlobalContext\";\nimport Messenger from \"./components/Messenger\";\nimport DataServices from \"./services/DataServices\";\nimport Stomp from \"stompjs\";\nimport SockJS from \"sockjs-client\";\n\nconst SearchContext = React.createContext({});\n\nfunction App(props) {\n\n    let SockJSr = new SockJS(\"/ws\");\n    const [authenticatedUser, setAuthenticatedUser] = React.useState({});\n    const [activeChat, setActiveChat] = React.useState({});\n    const [chatMessages, setChatMessages] = React.useState([]);\n    const [connections, setConnections] = React.useState([]);\n    const [stompClient, setStompClient] = React.useState(Stomp.over(SockJSr));\n\n    const connect = () => {\n        stompClient.connect({}, onConnected, onError);\n    };\n\n    const onError = (err) => {\n        console.log(err);\n    };\n\n    const onConnected = () => {\n        console.log(\"connected\");\n        stompClient.subscribe(\n            \"/user/\" + authenticatedUser.userId + \"/queue/messages\",\n            onMessageReceived\n        );\n    };\n\n    const onMessageReceived = (msg) => {\n        const notification = JSON.parse(msg.body);\n        console.log(msg.body);\n\n        if (activeChat.userId === notification.userId) {\n            DataServices.findChatMessage(notification.chatNotificationId).then((message) => {\n                const newMessages = chatMessages;\n                newMessages.push(message.data);\n                setChatMessages(newMessages);\n            }).catch(error => { console.log(error.response) });\n        } else {\n            console.log(\"Received a new message from \" + notification.firstName + \" \" + notification.lastName);\n        }\n    };\n\n    React.useEffect(() => {\n        connect();\n    },[authenticatedUser]);\n\n    return (\n        <div className=\"container-fluid p-0\">\n            <BrowserRouter>\n                <GlobalContext.Provider value={{\n                    authenticatedUser,\n                    setAuthenticatedUser,\n                    activeChat,\n                    setActiveChat,\n                    chatMessages,\n                    setChatMessages,\n                    connections,\n                    setConnections,\n                    stompClient\n                }}>\n                    <Navbar/>\n                    <div className=\"row m-0\">\n                        <Switch>\n                            <ResultsProvider>\n                                <Redirect from=\"/index.html\" to=\"/\" exact/>\n                                <Route path=\"/results\" component={Search}/>\n                                <Route exact path=\"/\" render={(props) => <NewsFeed {...props}/>}/>\n                                <Route path=\"/profile\" component={Profile}/>\n                                <Route path=\"/connections\" component={Connections}/>\n                                <Route path=\"/profileAll\" component={() => <FriendsProfilePage/>}/>\n                                <Route path=\"/post\" component={SinglePost}/>\n                                {/*<Route exact path=\"/chat\" render={(props) => <Chat {...props} />}/>*/}\n                                <Route path=\"/chat\" component={Messenger}/>\n                            </ResultsProvider>\n                        </Switch>\n                    </div>\n                </GlobalContext.Provider>\n            </BrowserRouter>\n        </div>\n    );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport { RecoilRoot } from \"recoil\";\nimport recoilPersist from \"recoil-persist\";\n\nconst { RecoilPersist, updateState } = recoilPersist([], {\n    key: \"recoil-persist\",\n    storage: sessionStorage,\n  });\n\nReactDOM.render(\n\n<RecoilRoot initializeState={updateState}>\n<RecoilPersist />\n<App/>\n\n</RecoilRoot>\n, document.getElementById('root'));\n"],"sourceRoot":""}