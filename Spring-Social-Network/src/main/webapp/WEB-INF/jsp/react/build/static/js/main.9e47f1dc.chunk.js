(this.webpackJsonpbootstrap_react_application=this.webpackJsonpbootstrap_react_application||[]).push([[0],{153:function(e,t,a){e.exports=a(302)},158:function(e,t,a){},184:function(e,t,a){},185:function(e,t,a){},210:function(e,t,a){},211:function(e,t,a){},212:function(e,t,a){},233:function(e,t,a){},300:function(e,t,a){},302:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(13),c=a.n(l),s=(a(158),a(2)),o=a(11),i=a(7),m=a(3),u=a.n(m);function d(){return u.a.get("/api/profile/users")}function p(){return u.a.get("/api/profile/user")}function f(e){return u.a.get("/api/profile/user/"+e)}function g(e,t){return u.a.post("/api/relationship",{currentUserId:e,profilePageId:t})}function h(e,t){return u.a.post("/api/deleteRelationship",{currentUserId:e,profilePageId:t})}function E(e,t){return u.a.post("/api/createRelationship",{currentUserId:e,profilePageId:t})}function v(e,t){return u.a.post("/api/acceptRelationship",{currentUserId:e,profilePageId:t})}function b(e){return u.a.get("/api/relationshipPending/"+e)}function N(e){return console.log("userid",e),u.a.post("/api/profile/"+e+"/image/upload")}function x(){return u.a.get("/api/user/")}function y(e,t){return u.a.get("/messages/"+e+"/"+t)}function I(e){return u.a.get("/messages/"+e)}function C(e,t){return u.a.get("/messages/"+e+"/"+t+"/count")}var w=new function(){this.getAllUsers=d,this.getCurrentUser=p,this.imageUpload=N,this.getCurrentProfile=f,this.getCurrentRelationship=g,this.deleteRelationship=h,this.createRelationship=E,this.acceptRelationship=v,this.getPendingRequests=b,this.getContacts=x,this.findChatMessages=y,this.findChatMessage=I,this.countNewMessages=C},j={objectFit:"cover",borderRadius:"50%",width:"40px",height:"40px"};var S=function(e){var t="/api/profile/searchUsers/"+e.requesterInfo.id;return Object(i.g)(),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card my-2 border-0"},r.a.createElement("div",{className:"card-body d-flex flex-row justify-content-between m-0 p-0"},r.a.createElement("div",{className:"d-flex flex-row"},r.a.createElement("img",{style:j,src:t,className:"avatar rounded-circle mx-2",alt:"Profile Picture"}),r.a.createElement("h6",{className:"card-text align-bottom mt-2"},e.requesterInfo.username)),r.a.createElement("div",null,r.a.createElement("button",{className:"btn btn-success ml-2",onClick:function(){w.acceptRelationship(e.requesterInfo.myId,e.requesterInfo.id).then((function(){console.log("Friend request from User "+e.requesterInfo.id+" Accepted"),e.handleUpdate(e.requesterInfo.id)}))}},r.a.createElement("i",{className:"fas fa-user-check"})),r.a.createElement("button",{className:"btn btn-danger ml-2",onClick:function(){w.deleteRelationship(e.requesterInfo.myId,e.requesterInfo.id).then((function(){console.log("Friend request from user "+e.requesterInfo.id+" Declined"),e.handleUpdate(e.requesterInfo.id)}))}},r.a.createElement("i",{className:"fas fa-user-times"}))))))},k=a(26),F=a(29),O=a.n(F);a(184);function P(e){var t=Object(i.g)();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card my-2 border-0",onClick:function(){u.a.get("/post/getSpecificPost/".concat(e.comment.commentId)).then((function(a){t.push({pathname:"/post",state:{post:a.data}}),e.updateNotifications()}))}},r.a.createElement("div",{className:"card-body justify-content-start my-0 py-0 px-1"},r.a.createElement("div",{className:"commentNotification"},r.a.createElement("p",{className:"card-text"},r.a.createElement("b",{className:"card-title mt-2"},e.comment.user.firstName+" "+e.comment.user.lastName)," commented on your post")),r.a.createElement("div",{className:"text-right"},r.a.createElement("small",null,r.a.createElement(O.a,{date:e.comment.created}))))))}a(185);var D=Object(n.createContext)(null),R=["Test DATA 001"],U={},A=r.a.createContext({}),M=r.a.createContext({}),q=function(e){return r.a.createElement(A.Provider,{value:R},e.children)},B=function(e){return r.a.createElement(M.Provider,{value:U},e.children)},T={objectFit:"cover",borderRadius:"50%",width:"40px",height:"40px"},L={float:"right","margin-right":"12px"};var H=function(){var e=r.a.useState(" "),t=Object(s.a)(e,2),a=t[0],n=t[1],l=r.a.useState(0),c=Object(s.a)(l,2),m=c[0],d=c[1],p=r.a.useState([]),f=Object(s.a)(p,2),g=f[0],h=f[1],E=r.a.useState(0),v=Object(s.a)(E,2),b=v[0],N=v[1],x=r.a.useState([]),y=Object(s.a)(x,2),I=y[0],C=y[1],j=r.a.useState([]),k=Object(s.a)(j,2),F=k[0],O=k[1],A=Object(i.g)(),M=r.a.useContext(D),q=(M.authenticatedUser,M.setAuthenticatedUser);function B(){u.a.get("/post/getNewComments").then((function(e){O(e.data)})).catch((function(e){console.log(e)}))}r.a.useEffect((function(){fetch("/userDetails",{method:"GET",credentials:"include"}).then((function(e){return e.json()})).then((function(e){n(e.firstName+" "+e.lastName),U=e,q(e),d(e.userId)})),m&&w.getPendingRequests(m).then((function(e){h(e.data)})).catch((function(e){console.log("No friend requests"+e.response)})),B()}),[m,b]);var H=r.a.useRef(!0);r.a.useEffect((function(){H.current?H.current=!1:A.push("/results")}),[I]);var _=function(e){e.preventDefault(),e.stopPropagation()};return r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light fixed-top"},r.a.createElement("a",{className:"navbar-brand",href:"/"},r.a.createElement("img",{src:"/img/logo.png",height:"35",alt:"Connector Logo",className:"m-0"})),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},r.a.createElement("form",{className:"form-inline my-2 my-lg-0 mr-auto",onSubmit:function(e){e.preventDefault(),e.target.search.value&&fetch("/searchUsers",{method:"GET",credentials:"include",headers:{input:e.target.search.value}}).then((function(e){return e.json()})).then((function(e){C(e),R=e,console.log(e),console.log(U)})),e.target.search.value=""}},r.a.createElement("input",{id:"searchBar",className:"form-control autocomplete mr-sm-2",name:"search",type:"search",placeholder:"Search","aria-label":"Search"})),r.a.createElement("ul",{className:"navbar-nav"},r.a.createElement("li",{className:"nav-item active"},r.a.createElement(o.b,{to:"/",className:"nav-link"},"Feed")),r.a.createElement("li",{className:"nav-item dropdown"},(g.length>0||F.length>0)&&r.a.createElement("span",{className:"badge badge-pill badge-primary",style:L},g.length+F.length),r.a.createElement("a",{className:"nav-link dropdown-toggle",href:"#",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"Notifications"),r.a.createElement("div",{className:"dropdown-menu dropdown-menu-right notificationsDiv",onClick:_,"aria-labelledby":"navbarDropdown"},0==g.length&&0==F.length&&r.a.createElement("small",{className:"ml-2"},"No New Notifications"),g.length>0&&r.a.createElement("small",{className:"text-left ml-3"},"Connection Requests"),0!==g.length&&g.map((function(e){return r.a.createElement("div",{onClick:_,className:"dropdown-item px-1 py-0"},r.a.createElement(S,{requesterInfo:{myId:m,id:e.userId,username:e.firstName+" "+e.lastName},handleUpdate:N}))})),F.length>0&&r.a.createElement("small",{className:"text-left ml-3"},"New Comments on your Posts"),F.length>0&&F.map((function(e){return r.a.createElement("div",{className:"dropdown-item px-2 py-0 m-0"},r.a.createElement(P,{comment:e,updateNotifications:B}))})))),r.a.createElement("li",{className:"nav-item active"},r.a.createElement(o.b,{to:"/chat",className:"nav-link"},"Messages")),r.a.createElement("li",{className:"nav-item active"},r.a.createElement(o.b,{to:"/connections",className:"nav-link"},"Connections")),r.a.createElement("li",null,r.a.createElement("img",{style:T,src:"/api/profile/image/download",className:"avatar rounded-circle ml-3",alt:"Cinque Terre"})),r.a.createElement("li",{className:"nav-item"},r.a.createElement(o.b,{to:"/profile",className:"nav-link"},a)),r.a.createElement("li",null,r.a.createElement("a",{className:"nav-link",href:"/logout"},"Logout"))))))},_=a(22),Y=a.n(_),G=a(36),J=a(20),V={objectFit:"cover",borderRadius:"50%",width:"40px",height:"40px"};var z=function(e){var t=r.a.useState(new Date),a=Object(s.a)(t,2),n=(a[0],a[1]),l=r.a.useState(!1),c=Object(s.a)(l,2),o=c[0],m=c[1],d=r.a.useState(e.comment.text),p=Object(s.a)(d,2),f=p[0],g=p[1],h=r.a.useContext(M),E=Object(i.g)();function v(){return(v=Object(G.a)(Y.a.mark((function t(){return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!o){t.next=10;break}return t.prev=1,t.next=4,u.a.post("/post/updateComment",{text:f},{withCredentials:!0,headers:{"Content-Type":"application/json",commentId:e.comment.commentId}});case 4:t.next=10;break;case 6:t.prev=6,t.t0=t.catch(1),console.log(t.t0),g(e.post.text);case 10:m(!o);case 11:case"end":return t.stop()}}),t,null,[[1,6]])})))).apply(this,arguments)}function b(){e.comment.user.userId===h.userId?E.push("/profile"):E.push({pathname:"/ProfileAll",state:{detail:e.comment.user.userId}})}return r.a.useEffect((function(){var t=new Date(e.comment.created);t.setHours(t.getHours()+3,t.getMinutes(),t.getSeconds(),t.getMilliseconds()),n(t)}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card p-0 my-1 mx-2"},r.a.createElement("div",{className:"card-body d-flex flex-row pt-2 pb-0 px-1 mb-0"},r.a.createElement("img",{style:V,src:"/api/profile/searchUsers/"+e.comment.user.userId,className:"avatar rounded-circle mx-2",alt:"Cinque Terre",onClick:b}),r.a.createElement("div",{className:"w-100"},r.a.createElement("h6",{className:"card-text mb-0",onClick:b,style:{cursor:"pointer"}},e.comment.user.firstName+" "+e.comment.user.lastName),r.a.createElement("blockquote",{className:"card-text p-0 m-0"},!o&&r.a.createElement("p",{className:"mb-0"},f),o&&r.a.createElement("textarea",{value:f,rows:"3",minLength:"1",maxLength:"250",className:"form-control",onChange:function(e){g(e.target.value)}}))),e.comment.user.userId===h.userId&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{onClick:function(){return v.apply(this,arguments)},id:"updateButton"+e.comment.commentId,style:{cursor:"pointer"}},r.a.createElement("i",{className:"far fa-edit mr-2"})),r.a.createElement("div",{onClick:function(){fetch("/post/removeComment",{method:"POST",credentials:"include",headers:{commentId:e.comment.commentId}}).then((function(t){e.value.setValue(!e.value.value)}))},id:"deleteButton"+e.comment.commentId,style:{cursor:"pointer"},className:"pr-2"},r.a.createElement("i",{className:"far fa-trash-alt"})))),r.a.createElement("div",{className:"card-body p-1"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-11 text-right"},r.a.createElement("p",{className:"card-text text-secondary"},r.a.createElement("small",null,r.a.createElement("i",{className:"far fa-clock pr-2"}),r.a.createElement(O.a,{date:e.comment.created}))))))))},W={objectFit:"cover",borderRadius:"50%",width:"50px",height:"50px"};var K=function(e){var t=r.a.useState(""),a=Object(s.a)(t,2),n=a[0],l=a[1],c=r.a.useState(new Date),o=Object(s.a)(c,2),m=(o[0],o[1]),d=r.a.useState(0),p=Object(s.a)(d,2),f=p[0],g=p[1],h=r.a.useState(!1),E=Object(s.a)(h,2),v=E[0],b=E[1],N=r.a.useState(e.post.text),x=Object(s.a)(N,2),y=x[0],I=x[1],C=Object(i.g)(),w=r.a.useContext(M);function j(){return(j=Object(G.a)(Y.a.mark((function t(a){return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!v){t.next=10;break}return t.prev=1,t.next=4,u.a.post("/post/updatePost",{text:y},{withCredentials:!0,headers:{"Content-Type":"application/json",postId:e.post.postId}});case 4:t.next=10;break;case 6:t.prev=6,t.t0=t.catch(1),console.log(t.t0),I(e.post.text);case 10:b(!v);case 11:case"end":return t.stop()}}),t,null,[[1,6]])})))).apply(this,arguments)}function S(){e.post.user.userId===w.userId?C.push("/profile"):C.push({pathname:"/ProfileAll",state:{detail:e.post.user.userId}})}return r.a.useEffect((function(){var t=new Date(e.post.created);t.setHours(t.getHours()+3,t.getMinutes(),t.getSeconds(),t.getMilliseconds()),m(t),g(e.post.cheers.filter((function(e){return!0===e.active})).length),"BLOB"===e.post.imageUrl?(document.getElementById("postImage"+e.post.postId).style.display="block",l("/post/downloadPostImage/"+e.post.postId)):""!==e.post.imageUrl&&null!==e.post.imageUrl&&(document.getElementById("postImage"+e.post.postId).style.display="block",l(e.post.imageUrl))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card p-0 my-3"}," ",r.a.createElement("div",{className:"card-body d-flex flex-row p-3"},r.a.createElement("img",{style:W,src:"/api/profile/searchUsers/"+e.post.user.userId,className:"avatar rounded-circle mx-3",alt:"Profile picture",onClick:S}),r.a.createElement("div",{className:"w-100",onClick:S},r.a.createElement("h5",{className:"card-title mb-0",style:{cursor:"pointer"}},e.post.user.firstName+" "+e.post.user.lastName),r.a.createElement("p",{className:"card-text text-secondary"},r.a.createElement("small",null,r.a.createElement("i",{className:"far fa-clock pr-2"}),r.a.createElement(O.a,{date:e.post.created})))),e.post.user.userId===w.userId&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{onClick:function(e){return j.apply(this,arguments)},id:"updateButton"+e.post.postId,style:{cursor:"pointer"}},r.a.createElement("i",{className:"far fa-edit mr-2"})),r.a.createElement("div",{onClick:function(){fetch("/post/removePost",{method:"POST",credentials:"include",headers:{postId:e.post.postId}}).then((function(e){C.push("/profile"),C.push("/")}))},id:"deleteButton"+e.post.postId,style:{cursor:"pointer"}},r.a.createElement("i",{className:"far fa-trash-alt"})))),r.a.createElement("div",{className:"card-body p-1"},r.a.createElement("img",{src:n,alt:"Couldn't load image from URL",className:"img-fluid rounded",id:"postImage"+e.post.postId,style:{display:"none",width:"100%"}}),r.a.createElement("blockquote",{className:"card-text p-3 m-0"},!v&&r.a.createElement("p",{className:"mb-0"},y),v&&r.a.createElement("textarea",{value:y,rows:"6",minLength:"1",maxLength:"250",className:"form-control",onChange:function(e){I(e.target.value)}})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-xs-12 col-sm-4 col-md-4 m-2"},r.a.createElement(k.a,{className:"mx-2",icon:J.b,onClick:function(){fetch("/post/cheers",{method:"POST",credentials:"include",headers:{postId:e.post.postId}}).then((function(e){return e.json()})).then((function(e){g(e.filter((function(e){return!0===e.active})).length)}))},style:{cursor:"pointer"}}),f,r.a.createElement(k.a,{className:"mx-2",icon:J.a,"data-toggle":"collapse","data-target":"#collapseExample"+e.post.postId,"aria-expanded":"false","aria-controls":"collapseExample",style:{cursor:"pointer"}}),e.post.comments.length))),r.a.createElement("form",{className:"mx-2",onSubmit:function(t){t.preventDefault(),fetch("/post/insertComment",{method:"POST",credentials:"include",headers:{input:t.target.input.value,postId:e.post.postId}}).then((function(e){return e.json()})).then((function(t){return e.value.setValue(!e.value.value)})),t.target.input.value=""}},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Enter a comment...",name:"input",minLength:"1",maxLength:"250"}))),r.a.createElement("small",{className:"ml-2 mt-0 mb-1","data-toggle":"collapse","data-target":"#collapseExample"+e.post.postId,"aria-expanded":"false","aria-controls":"collapseExample",style:{cursor:"pointer"}},"Show/Hide Comments"),r.a.createElement("div",{className:"collapse",id:"collapseExample"+e.post.postId},e.post.comments.sort((function(e,t){return new Date(e.created)-new Date(t.created)})).map((function(t){return r.a.createElement(z,{comment:t,value:e.value,key:t.commentId})})))))},Q={objectFit:"cover",borderRadius:"50%",width:"40px",height:"40px"};var X=function(e){var t="/api/profile/searchUsers/"+e.userFriendId,a=Object(i.g)();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card my-2 border-0"},r.a.createElement("div",{className:"card-body d-flex flex-row pt-2 pb-0 px-1"},r.a.createElement("img",{style:Q,src:t,className:"avatar rounded-circle mx-2",alt:"Profile Picture"}),r.a.createElement("h6",{className:"card-text align-bottom mt-2"},e.username),r.a.createElement("a",{href:"/ProfileAll",className:"stretched-link",onClick:function(t){t.preventDefault(),console.log(e.userFriendId),a.push({pathname:"/ProfileAll",state:{detail:e.userFriendId}})}}))))},Z=a(38);var $=function(e){var t=r.a.useState(""),a=Object(s.a)(t,2),l=a[0],c=a[1],o=r.a.useState("none"),m=Object(s.a)(o,2),d=m[0],p=m[1],f=new RegExp("(http(s?):)([/|.|\\w|\\s|-])*\\.(?:jpg|gif|png)"),g=(new RegExp(/(data:image\/[^;]+;base64[^"]+)/g),r.a.useState("Drag 'n' drop image, or click to browse ")),h=Object(s.a)(g,2),E=h[0],v=h[1],b=r.a.useState(null),N=Object(s.a)(b,2),x=N[0],y=N[1],I=Object(i.g)(),C=Object(n.useCallback)((function(e){var t=e[0],a=new FormData;v(t.path+" "),a.append("file",t),y(a),O()}),[]),w=Object(Z.a)({onDrop:C}),j=w.getRootProps,S=w.getInputProps,k=w.isDragActive,F={display:d};function O(){c(""),p("none"),document.getElementById("url").value=""}function P(){v("Drag 'n' drop image, or click to browse "),y(null)}return r.a.createElement("div",{className:"my-2"},r.a.createElement("img",{src:l,alt:"",height:"120px",className:"m-1"}),r.a.createElement("button",{onClick:O,style:F,className:"btn btn-white"},"x"),r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),null!==x||""===t.target.text.value&&""===t.target.url.value?null!==x?u.a.post("/post/insertPostWithFile",x,{headers:{"Content-Type":"multipart/form-data",text:t.target.text.value}}).then((function(){document.getElementById("resetButton").click(),e.closeModal(),I.push("/profile")})).then((function(){I.push("/")})).catch((function(e){console.log(e)})):alert("Post cannot be empty"):fetch("/post/insertPost",{method:"POST",credentials:"include",headers:{text:t.target.text.value,imageUrl:t.target.url.value}}).then((function(e){return e.json()})).then((function(t){document.getElementById("resetButton").click(),e.closeModal(),I.push("/profile")})).then((function(){I.push("/")})).catch((function(e){console.error("Error:",e)}))}},r.a.createElement("div",{className:"form-group"},r.a.createElement("textarea",{className:"form-control",id:"exampleInputEmail1","aria-describedby":"freeText",placeholder:"What are you thinking?",onChange:function(e){f.test(e.target.value)&&(c(e.target.value),document.getElementById("url").value=e.target.value,e.target.value="",p("inline"),P())},name:"text",maxLength:"250",rows:"5"}),r.a.createElement("small",{id:"freeText",className:"form-text text-muted"},"Only visible to your connections."),r.a.createElement("input",{type:"hidden",id:"url",name:"url"})),r.a.createElement("div",j(),r.a.createElement("input",S()),k?r.a.createElement("p",null,"Drop the image here ..."):r.a.createElement("p",null,E,r.a.createElement("i",{className:"far fa-file-image"}))),r.a.createElement("input",{type:"reset",className:"btn btn-light mr-2",value:"Reset Form",onClick:P,id:"resetButton"}),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Post")))},ee=a(14),te=Object(ee.atom)({key:"loggedInUser",default:{},persistence_UNSTABLE:{type:"loggedInUser"}});Object(ee.atom)({key:"chatActiveContact",persistence_UNSTABLE:{type:"chatActiveContact"}}),Object(ee.atom)({key:"chatMessages",default:[],persistence_UNSTABLE:{type:"chatMessages"}}),a(210);function ae(e){return r.a.createElement("div",{className:"card border-0 mb-4 prevArticle",onClick:function(){return window.open("https://articlomatic.herokuapp.com","_blank")}},r.a.createElement("div",{className:"row no-gutters d-flex flex-row justify-content-between"},r.a.createElement("div",{className:"col-7 mr-2 d-flex flex-column justify-content-between"},r.a.createElement("small",{className:"text-muted"},e.article.category.name),r.a.createElement("h6",{className:"card-title"},e.article.title),r.a.createElement("div",null,r.a.createElement("span",{className:"card-text float-left"},r.a.createElement("small",{className:"text-muted"},"@"+e.article.user.firstName+" "+e.article.user.lastName)),r.a.createElement("span",{className:"card-text float-right"},r.a.createElement("small",{className:"text-muted"},r.a.createElement(O.a,{date:e.article.createdAt}))))),r.a.createElement("div",{className:"col-4"},r.a.createElement("img",{src:"https://mern-articlomaric-app.herokuapp.com/api/articleImage?articleId="+e.article._id,className:"img-fluid imageScalingSmall",alt:"Article Image"}))))}a(31);var ne=a(131),re=[],le=(r.a.createContext([]),r.a.createContext([])),ce=function(e){return r.a.createElement(le.Provider,{value:re},e.children)};var se=function(e){var t=r.a.useState([]),a=Object(s.a)(t,2),n=a[0],l=a[1],c=r.a.useState([]),o=Object(s.a)(c,2),i=o[0],m=o[1],d=r.a.useState(!0),p=Object(s.a)(d,2),f=p[0],g=p[1],h=r.a.useState(!0),E=Object(s.a)(h,2),v=E[0],b=E[1],N=r.a.useState(!0),x=Object(s.a)(N,2),y=x[0],I=x[1],C=r.a.useState(1),j=Object(s.a)(C,2),S=j[0],k=j[1],F=r.a.useContext(D),O=(F.connections,F.setConnections),P=r.a.useState([]),R=Object(s.a)(P,2),U=R[0],A=R[1],M=Object(ee.useRecoilState)(te),q=Object(s.a)(M,2),T=(q[0],q[1]);function L(){return(L=Object(G.a)(Y.a.mark((function e(){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.get("https://mern-articlomaric-app.herokuapp.com/api/getTrendingArticles").then((function(e){A(e.data),I(!1)}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}return r.a.useEffect((function(){w.getCurrentUser().then((function(e){T(e.data)})).catch((function(e){console.log(e.response)}))}),[]),r.a.useEffect((function(){fetch("/api/newsFeed").then((function(e){return e.json()})).then((function(e){l(e.friends),m(e.posts),re=e.posts,e.friends,O(e.friends),e.posts.length<5&&b(!1)}))}),[f]),r.a.useEffect((function(){!function(){L.apply(this,arguments)}()}),[]),Object(ne.a)((function(){v&&(u.a.get("/api/getPostPage/".concat(S)).then((function(e){m(i.concat(e.data)),(0===e.data.length||e.data.length<5)&&b(!1)})),k(S+1))})),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"col-md-3 col-12 d-none d-md-block"},r.a.createElement("div",{className:"scrollable"},n.map((function(e){return r.a.createElement(X,{userFriendId:e.userId,username:e.firstName+" "+e.lastName})})))),r.a.createElement("div",{className:"col-md-6 col-12 postsList"},r.a.createElement("button",{type:"button",className:"btn btn-primary mt-2","data-toggle":"modal","data-target":"#exampleModal"},"New Post"),r.a.createElement("div",{className:"modal fade",id:"exampleModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},r.a.createElement("div",{className:"modal-dialog",role:"document"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title",id:"exampleModalLabel"},"New Post"),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",id:"closeButton"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body"},r.a.createElement($,{closeModal:function(){document.getElementById("closeButton").click()},value:f,setValue:g}))))),r.a.createElement(B,null,i.map((function(e){return r.a.createElement(K,{post:e,value:{value:f,setValue:g}})}))),v&&r.a.createElement("div",{className:"text-center mt-5 mb-5"},r.a.createElement("div",{className:"spinner-border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")))),r.a.createElement("div",{className:"col-md-3 d-lg-block d-none"},r.a.createElement("div",{className:"mr-2 scrollable"},r.a.createElement("h5",{className:"text-right mt-5"},"Trending on Atricl-O-matic"),y&&r.a.createElement("div",{className:"text-center mt-5"},r.a.createElement("div",{className:"spinner-border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))),U.map((function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("hr",null),r.a.createElement(ae,{key:e._id,article:e}))})))))},oe={objectFit:"cover",borderRadius:"50%",width:"70px",height:"70px"};var ie=function(e){var t=Object(i.g)();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card my-2 border-0"},r.a.createElement("div",{className:"card-body d-flex flex-row pt-2 pb-0 px-1"},r.a.createElement("img",{style:oe,src:"/api/profile/searchUsers/"+e.avatar,className:"avatar rounded-circle mx-2",alt:"Profile Picture"}),r.a.createElement("h5",{className:"card-text align-bottom mt-4 ml-3"},e.username),r.a.createElement("a",{href:"/ProfileAll",className:"stretched-link",onClick:function(a){a.preventDefault(),console.log(e.avatar),t.push({pathname:"/ProfileAll",state:{detail:e.avatar}})}})),r.a.createElement("hr",null)))};var me=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"col-sm-6 offset-sm-3 col-xs-12 marginFromTopForFixedNavbar"},r.a.createElement("h4",{className:"my-4"},"Search results"),r.a.createElement(A.Consumer,null,(function(e){return e.map((function(e){return r.a.createElement(ie,{username:e.firstName+" "+e.lastName,avatar:e.userId,onClick:function(){console.log(e)}})}))}))))};a(211);var ue=function(){var e=Object(i.g)(),t=Object(n.useCallback)((function(t){var a=t[0];console.log(a);var n=new FormData;n.append("file",a),u.a.post("/api/profile/image/upload",n,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){console.log("file upload success"),e.push("/"),e.push("/profile")})).catch((function(e){console.log(e)}))}),[]),a=Object(Z.a)({onDrop:t}),l=a.getRootProps,c=a.getInputProps,s=a.isDragActive;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",l(),r.a.createElement("input",c()),s?r.a.createElement("p",null,"Drop the image here ..."):r.a.createElement("p",null,"Drag 'n' drop profile image, or click to select profile image")))};var de=function(){var e=Object(i.g)(),t=Object(n.useCallback)((function(t){var a=t[0];console.log(a);var n=new FormData;n.append("file",a),u.a.post("/api/profile/image-background/upload",n,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){console.log("file upload success"),e.push("/"),e.push("/profile")})).catch((function(e){console.log(e)}))}),[]),a=Object(Z.a)({onDrop:t}),l=a.getRootProps,c=a.getInputProps,s=a.isDragActive;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",l(),r.a.createElement("input",c()),s?r.a.createElement("p",null,"Drop the image here ..."):r.a.createElement("p",null,"Drag 'n' drop background image, or click to select background image")))};function pe(e){var t=r.a.useState({}),a=Object(s.a)(t,2),n=a[0],l=a[1],c=r.a.useState([]),o=Object(s.a)(c,2),i=o[0],m=o[1];function d(){w.getCurrentUser().then((function(e){var t;console.log("user in profile : ",e.data),l(e.data),t=e.data.userId,u.a.get("/post/getUsersPosts/".concat(t)).then((function(e){m(e.data)})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e.response)}))}return r.a.useEffect((function(){d()}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"col-md-6 col-12 offset-md-3 offset-0 marginFromTopForFixedNavbar"},r.a.createElement("div",{id:"cssSelector"},r.a.createElement("div",{className:"card hovercard"},r.a.createElement("div",{style:{background:'url("/api/profile/image-background/download")',backgroundSize:"cover",height:"300px"}},r.a.createElement(de,null)),r.a.createElement("div",{className:"avatar"},r.a.createElement("img",{style:{objectFit:"cover",borderRadius:"50%",width:"250px",height:"250px"},alt:"image-profile",src:"/api/profile/image/download"}),r.a.createElement(ue,null)),r.a.createElement("div",{className:"info"},r.a.createElement("div",{className:"title"},r.a.createElement("h3",null,n.firstName," ",n.lastName)),r.a.createElement("div",{className:"desc"},"Birthday ",new Date(n.birthday).toLocaleDateString("en-GB")))))),r.a.createElement("div",{className:"col-md-6 col-12 offset-md-3"},i.map((function(e){return r.a.createElement(K,{post:e})}))))}a(212);function fe(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(B,null,r.a.createElement(ce,null,r.a.createElement(pe,null))))}var ge={objectFit:"cover",borderRadius:"50%",width:"70px",height:"70px"};var he=function(e){var t=Object(i.g)();return r.a.createElement(r.a.Fragment,null,console.log(e),r.a.createElement("div",{className:"card my-2 border-0"},r.a.createElement("div",{className:"card-body d-flex flex-row pt-2 pb-0 px-1"},r.a.createElement("img",{style:ge,src:"/api/profile/searchUsers/"+e.userId,className:"avatar rounded-circle mx-2",alt:"Profile Picture"}),r.a.createElement("h5",{className:"card-text align-bottom mt-4 ml-3"},e.username),r.a.createElement("a",{href:"/ProfileAll",className:"stretched-link",onClick:function(a){a.preventDefault(),console.log(e.avatar),t.push({pathname:"/ProfileAll",state:{detail:e.userId}})}})),r.a.createElement("hr",null)))};var Ee=function(){var e=r.a.useContext(D).connections;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"col-sm-6 offset-sm-3 col-xs-12 marginFromTopForFixedNavbar"},r.a.createElement("h4",{className:"my-4"},"Connections"),e.map((function(e){return r.a.createElement(he,{username:e.firstName+" "+e.lastName,userId:e.userId})}))))};var ve=function(e){var t=Object(i.h)(),a="/api/profile/searchUsers/"+t.state.detail,l="/api/profile/image-background/download/"+t.state.detail,c={background:"url(".concat(l,")"),backgroundSize:"cover",height:"300px"},o=r.a.useState({}),m=Object(s.a)(o,2),d=m[0],p=m[1],f=r.a.useState(null),g=Object(s.a)(f,2),h=g[0],E=g[1],v=r.a.useState(0),b=Object(s.a)(v,2),N=b[0],x=b[1],y=r.a.useContext(M),I=r.a.useState([]),C=Object(s.a)(I,2),j=C[0],S=C[1];Object(n.useEffect)((function(){w.getCurrentRelationship(y.userId,t.state.detail).then((function(e){console.log("friendship status : ",e.data),console.log(e.data.id.userFirstId),E(e.data)})).catch((function(e){console.log(e.response)})),w.getCurrentProfile(t.state.detail).then((function(e){console.log("user in profile : ",e.data),p(e.data)})).catch((function(e){console.log(e.response)})),u.a.get("/post/getUsersPosts/".concat(t.state.detail)).then((function(e){S(e.data)})).catch((function(e){console.log(e)}))}),[N]);var F=function(){w.deleteRelationship(y.userId,t.state.detail).then((function(){console.log("Relationship deleted"),x(1)}))};function O(){return!!h&&(-1===h.id.userFirstId?"noRelationship":!0===h.friends?"friends":y.userId<t.state.detail?h.pendingFirstSecond?"pendingFriendRequest":"respondFriendRequest":h.pendingSecondFirst?"pendingFriendRequest":"respondFriendRequest")}return r.a.createElement(r.a.Fragment,null,console.log(O()),r.a.createElement("div",{className:"col-md-6 col-12 offset-md-3 offset-0 marginFromTopForFixedNavbar"},r.a.createElement("div",{id:"cssSelector"},r.a.createElement("div",{className:"card hovercard"},r.a.createElement("div",{style:c}),r.a.createElement("div",{className:"avatar"},r.a.createElement("img",{style:{objectFit:"cover",borderRadius:"50%",width:"250px",height:"250px"},alt:"image-profile",src:a})),r.a.createElement("div",{className:"info"},r.a.createElement("div",{className:"title"},"noRelationship"===O()&&r.a.createElement("div",{className:"StartingDiv"},r.a.createElement("button",{onClick:function(){w.createRelationship(y.userId,t.state.detail).then((function(){console.log("Friend request sent"),x(2)}))}},r.a.createElement(k.a,{id:"AddFriendIcon",icon:J.d}),r.a.createElement("span",{className:"InnerSpan"},"Add Friend"))),"friends"===O()&&r.a.createElement("div",{className:"StartingDiv"},r.a.createElement("button",null,r.a.createElement(k.a,{id:"AddFriendIcon",icon:J.c}),r.a.createElement("span",{className:"InnerSpan"},"\u2714 Friends")),r.a.createElement("button",{id:"removeB",onClick:F},"\u2717 Remove Friend")),"pendingFriendRequest"===O()&&r.a.createElement("div",{className:"StartingDiv"},r.a.createElement("button",{title:"Click to cancel Friend Request"},r.a.createElement(k.a,{id:"AddFriendIcon",icon:J.c}),r.a.createElement("span",{className:"InnerSpan",onClick:F},"Request Pending"))),"respondFriendRequest"===O()&&r.a.createElement("div",{className:"StartingDiv"},r.a.createElement("button",null,r.a.createElement(k.a,{id:"AddFriendIcon",icon:J.c}),r.a.createElement("span",{className:"InnerSpan"},"Respond to Request")),r.a.createElement("div",null,r.a.createElement("button",{id:"acceptB",onClick:function(){w.acceptRelationship(y.userId,t.state.detail).then((function(){console.log("Friend request Accepted"),x(3)}))}},"Accept"),r.a.createElement("button",{id:"declineB",onClick:F},"Decline"))),r.a.createElement("h3",null,d.firstName," ",d.lastName)),r.a.createElement("div",{className:"desc"},"Birthday ",new Date(d.birthday).toLocaleDateString("en-GB")))))),r.a.createElement("div",{className:"col-md-6 col-12 offset-md-3"},j.map((function(e){return r.a.createElement(K,{post:e})}))))};var be=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(B,null,r.a.createElement(ce,null,r.a.createElement(ve,null))))},Ne=a(63);a(307),a(306),a(133),a(233);function xe(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"col-md-6 offset-md-3 col-12 marginFromTopForFixedNavbar"},r.a.createElement(B,null,r.a.createElement(K,{post:e.location.state.post}))))}a(300);var ye={objectFit:"cover",borderRadius:"50%",width:"40px",height:"40px"},Ie={cursor:"pointer"};var Ce=function(e){var t=r.a.useContext(D),a=t.activeChat,n=t.setActiveChat,l="/api/profile/searchUsers/"+e.contact.userId;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card my-2 border-0",onClick:function(){n(e.contact)},style:Ie},r.a.createElement("div",{className:"card-body d-flex flex-row py-2 pb-0 px-1 ".concat(a.userId===e.contact.userId?"bg-light":"")},r.a.createElement("img",{style:ye,src:l,className:"avatar rounded-circle mx-2",alt:"Profile Picture"}),r.a.createElement("h6",{className:"card-text align-bottom mt-2 d-sm-block d-none"},e.contact.firstName+" "+e.contact.lastName))))},we=a(65),je=a.n(we),Se={borderRadius:"10px"};function ke(e){new Date(e.message.timestamp);var t=r.a.useState(e.message.timestamp),a=Object(s.a)(t,2),n=a[0];a[1];function l(e){var t=new Date;return e.getDate()==t.getDate()&&e.getMonth()==t.getMonth()&&e.getFullYear()==t.getFullYear()}function c(e){var t=new Date;return e.getFullYear()==t.getFullYear()}return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:e.message.senderId==e.authUser.userId?"bg-light float-right":"bg-secondary float-left text-light",style:Se},r.a.createElement("p",{className:"m-1"},e.message.content)),r.a.createElement("br",null),r.a.createElement("div",{className:e.message.senderId==e.authUser.userId?"text-right":"text-left"},r.a.createElement("small",{className:"text-secondary"},l(new Date(n))?r.a.createElement(je.a,{date:n,format:"HH:mm"}):c(new Date(n))?r.a.createElement(je.a,{date:n,format:"ddd DD MMM, HH:mm"}):r.a.createElement(je.a,{date:n,format:"ddd DD MMM YYYY, HH:mm"}))))}function Fe(e){var t=r.a.useContext(D).authenticatedUser,a=r.a.useContext(D),n=a.activeChat,l=a.setActiveChat,c=r.a.useContext(D),o=c.chatMessages,i=c.setChatMessages,m=(r.a.useContext(D).connections,r.a.useContext(D).stompClient),d=r.a.useState([]),p=Object(s.a)(d,2),f=p[0],g=p[1],h=r.a.useState(""),E=Object(s.a)(h,2),v=E[0],b=E[1];return r.a.useEffect((function(){u.a.get("/messages/getChats").then((function(e){g(e.data),l(e.data[0])}))}),[]),r.a.useEffect((function(){var e;(e=n.userId)&&u.a.get("/messages/".concat(e,"/").concat(t.userId)).then((function(e){i(e.data)}))}),[n]),r.a.createElement("div",{className:"col-lg-8 col-12 offset-lg-2 mt-5 pt-3"},r.a.createElement("button",{type:"button",className:"btn btn-primary my-3","data-toggle":"modal","data-target":"#exampleModal"},"New Chat"),r.a.createElement("div",{className:"modal fade",id:"exampleModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},r.a.createElement("div",{className:"modal-dialog",role:"document"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title",id:"exampleModalLabel"},"Modal title"),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body"},"..."),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal"},"Close"),r.a.createElement("button",{type:"button",className:"btn btn-primary"},"Save changes"))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-4 pr-0 tallDiv"},r.a.createElement("div",{className:"tallDivOfChats hideScrollBar"},f.map((function(e){return r.a.createElement("div",null,r.a.createElement(Ce,{contact:e}))})))),r.a.createElement("div",{className:"col-8 border border-light px-0 tallDiv pb-2"},n.userId&&r.a.createElement(X,{userFriendId:n.userId,username:n.firstName+" "+n.lastName}),r.a.createElement("div",{className:"tallOverFlow"},r.a.createElement("ul",{className:"px-3",style:{listStyle:"none"}},o.map((function(e){return r.a.createElement("li",null,r.a.createElement(ke,{message:e,authUser:t}),r.a.createElement("br",null))})))),r.a.createElement("div",{className:"m-3"},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),function(e){if(""!==e.trim()){var a={senderId:t.userId,recipientId:n.userId,content:e,timestamp:new Date};m.send("/app/chat",{},JSON.stringify(a));var r=Object(Ne.a)(o);r.push(a),i(r)}}(v)}},r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"col-11"},r.a.createElement("input",{className:"form-control w-80",type:"text",value:v,onChange:function(e){b(e.target.value)}})),r.a.createElement("div",{className:"col-1"},r.a.createElement("button",{type:"submit",className:"btn"},r.a.createElement("i",{className:"far fa-paper-plane fa-2x"})))))))))}var Oe=a(79),Pe=a.n(Oe),De=a(80),Re=a.n(De);r.a.createContext({});var Ue=function(e){var t=new Re.a("/ws"),a=r.a.useState({}),n=Object(s.a)(a,2),l=n[0],c=n[1],m=r.a.useState({}),u=Object(s.a)(m,2),d=u[0],p=u[1],f=r.a.useState([]),g=Object(s.a)(f,2),h=g[0],E=g[1],v=r.a.useState([]),b=Object(s.a)(v,2),N=b[0],x=b[1],y=r.a.useState(Pe.a.over(t)),I=Object(s.a)(y,2),C=I[0],j=(I[1],function(e){console.log(e)}),S=function(){console.log("connected"),C.subscribe("/user/"+l.userId+"/queue/messages",k)},k=function(e){var t=JSON.parse(e.body);console.log(e.body),d.userId===t.userId?w.findChatMessage(t.chatNotificationId).then((function(e){var t=h;t.push(e.data),E(t)})).catch((function(e){console.log(e.response)})):console.log("Received a new message from "+t.firstName+" "+t.lastName)};return r.a.useEffect((function(){C.connect({},S,j)}),[l]),r.a.createElement("div",{className:"container-fluid p-0"},r.a.createElement(o.a,null,r.a.createElement(D.Provider,{value:{authenticatedUser:l,setAuthenticatedUser:c,activeChat:d,setActiveChat:p,chatMessages:h,setChatMessages:E,connections:N,setConnections:x,stompClient:C}},r.a.createElement(H,null),r.a.createElement("div",{className:"row m-0"},r.a.createElement(i.d,null,r.a.createElement(q,null,r.a.createElement(i.a,{from:"/index.html",to:"/",exact:!0}),r.a.createElement(i.b,{path:"/results",component:me}),r.a.createElement(i.b,{exact:!0,path:"/",render:function(e){return r.a.createElement(se,e)}}),r.a.createElement(i.b,{path:"/profile",component:fe}),r.a.createElement(i.b,{path:"/connections",component:Ee}),r.a.createElement(i.b,{path:"/profileAll",component:function(){return r.a.createElement(be,null)}}),r.a.createElement(i.b,{path:"/post",component:xe}),r.a.createElement(i.b,{path:"/chat",component:Fe})))))))},Ae=a(147),Me=Object(Ae.a)([],{key:"recoil-persist",storage:sessionStorage}),qe=Me.RecoilPersist,Be=Me.updateState;c.a.render(r.a.createElement(ee.RecoilRoot,{initializeState:Be},r.a.createElement(qe,null),r.a.createElement(Ue,null)),document.getElementById("root"))},31:function(e,t,a){}},[[153,1,2]]]);
//# sourceMappingURL=main.9e47f1dc.chunk.js.map